ARM GAS  /tmp/ccDrtRJY.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"main.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.MX_GPIO_Init,"ax",%progbits
  16              		.align	1
  17              		.syntax unified
  18              		.thumb
  19              		.thumb_func
  20              		.fpu softvfp
  22              	MX_GPIO_Init:
  23              	.LFB270:
  24              		.file 1 "Src/main.c"
   1:Src/main.c    **** /* USER CODE BEGIN Header */
   2:Src/main.c    **** /**
   3:Src/main.c    ****   ******************************************************************************
   4:Src/main.c    ****   * @file           : main.c
   5:Src/main.c    ****   * @brief          : Main program body
   6:Src/main.c    ****   ******************************************************************************
   7:Src/main.c    ****   * @attention
   8:Src/main.c    ****   *
   9:Src/main.c    ****   * <h2><center>&copy; Copyright (c) 2020 STMicroelectronics.
  10:Src/main.c    ****   * All rights reserved.</center></h2>
  11:Src/main.c    ****   *
  12:Src/main.c    ****   * This software component is licensed by ST under BSD 3-Clause license,
  13:Src/main.c    ****   * the "License"; You may not use this file except in compliance with the
  14:Src/main.c    ****   * License. You may obtain a copy of the License at:
  15:Src/main.c    ****   *                        opensource.org/licenses/BSD-3-Clause
  16:Src/main.c    ****   *
  17:Src/main.c    ****   ******************************************************************************
  18:Src/main.c    ****   */
  19:Src/main.c    **** /* USER CODE END Header */
  20:Src/main.c    **** 
  21:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
  22:Src/main.c    **** #include "main.h"
  23:Src/main.c    **** 
  24:Src/main.c    **** /* Private includes ----------------------------------------------------------*/
  25:Src/main.c    **** /* USER CODE BEGIN Includes */
  26:Src/main.c    **** #include <stdio.h>
  27:Src/main.c    **** #include <string.h>
  28:Src/main.c    **** #include <math.h>
  29:Src/main.c    **** #include <float.h>
  30:Src/main.c    **** #include <servomotor.h>
  31:Src/main.c    **** #include <mpu6050.h>
  32:Src/main.c    **** #include <moving_average.h>
  33:Src/main.c    **** #include <float_to_string.h>
  34:Src/main.c    **** //#include <stm32f103x6.h>
ARM GAS  /tmp/ccDrtRJY.s 			page 2


  35:Src/main.c    **** /* USER CODE END Includes */
  36:Src/main.c    **** 
  37:Src/main.c    **** /* Private typedef -----------------------------------------------------------*/
  38:Src/main.c    **** /* USER CODE BEGIN PTD */
  39:Src/main.c    **** 
  40:Src/main.c    **** /* USER CODE END PTD */
  41:Src/main.c    **** 
  42:Src/main.c    **** /* Private define ------------------------------------------------------------*/
  43:Src/main.c    **** /* USER CODE BEGIN PD */
  44:Src/main.c    **** 
  45:Src/main.c    **** #define DEFAULT_SMOOTHING 20
  46:Src/main.c    **** #define DEFAULT_FACTOR 1.4
  47:Src/main.c    **** #define ROUND_ANGLE_PACK
  48:Src/main.c    **** 
  49:Src/main.c    **** /* USER CODE END PD */
  50:Src/main.c    **** 
  51:Src/main.c    **** /* Private macro -------------------------------------------------------------*/
  52:Src/main.c    **** /* USER CODE BEGIN PM */
  53:Src/main.c    **** /* USER CODE END PM */
  54:Src/main.c    **** 
  55:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  56:Src/main.c    **** I2C_HandleTypeDef hi2c2;
  57:Src/main.c    **** 
  58:Src/main.c    **** RTC_HandleTypeDef hrtc;
  59:Src/main.c    **** 
  60:Src/main.c    **** TIM_HandleTypeDef htim2;
  61:Src/main.c    **** TIM_HandleTypeDef htim3;
  62:Src/main.c    **** TIM_HandleTypeDef htim4;
  63:Src/main.c    **** 
  64:Src/main.c    **** UART_HandleTypeDef huart1;
  65:Src/main.c    **** 
  66:Src/main.c    **** /* USER CODE BEGIN PV */
  67:Src/main.c    **** 
  68:Src/main.c    **** SD_MPU6050 position_sensor;
  69:Src/main.c    **** 
  70:Src/main.c    **** float sensor_roll, sensor_pitch, sensor_factor;
  71:Src/main.c    **** float roll_compensation, pitch_compensation;
  72:Src/main.c    **** size_t smoothing;
  73:Src/main.c    **** 
  74:Src/main.c    **** servo_t servo_roll;
  75:Src/main.c    **** servo_t servo_pitch;
  76:Src/main.c    **** 
  77:Src/main.c    **** #define SERVO_ROLL_CHANNEL TIM_CHANNEL_1
  78:Src/main.c    **** #define SERVO_PITCH_CHANNEL TIM_CHANNEL_2
  79:Src/main.c    **** 
  80:Src/main.c    **** maf_t roll_filter;
  81:Src/main.c    **** maf_t pitch_filter;
  82:Src/main.c    **** 
  83:Src/main.c    **** 
  84:Src/main.c    **** /* USER CODE END PV */
  85:Src/main.c    **** 
  86:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  87:Src/main.c    **** void SystemClock_Config(void);
  88:Src/main.c    **** static void MX_GPIO_Init(void);
  89:Src/main.c    **** static void MX_I2C2_Init(void);
  90:Src/main.c    **** static void MX_TIM2_Init(void);
  91:Src/main.c    **** static void MX_TIM3_Init(void);
ARM GAS  /tmp/ccDrtRJY.s 			page 3


  92:Src/main.c    **** static void MX_USART1_UART_Init(void);
  93:Src/main.c    **** static void MX_RTC_Init(void);
  94:Src/main.c    **** static void MX_TIM4_Init(void);
  95:Src/main.c    **** /* USER CODE BEGIN PFP */
  96:Src/main.c    **** 
  97:Src/main.c    **** /* USER CODE END PFP */
  98:Src/main.c    **** 
  99:Src/main.c    **** /* Private user code ---------------------------------------------------------*/
 100:Src/main.c    **** /* USER CODE BEGIN 0 */
 101:Src/main.c    **** 
 102:Src/main.c    **** /* -- System -- */
 103:Src/main.c    **** void init_system()
 104:Src/main.c    **** {
 105:Src/main.c    ****     smoothing = DEFAULT_SMOOTHING;
 106:Src/main.c    ****     if(init_maf(&roll_filter, smoothing) == 0) error_alert("Cannot init MAF");
 107:Src/main.c    ****     if(init_maf(&pitch_filter, smoothing) == 0) error_alert("Cannot init MAF");
 108:Src/main.c    **** 
 109:Src/main.c    ****     init_position_sensor();
 110:Src/main.c    ****     init_servomotors();
 111:Src/main.c    ****     init_uart_messaging();
 112:Src/main.c    ****     init_servomotors_motion();
 113:Src/main.c    ****     init_mailbox();
 114:Src/main.c    **** }
 115:Src/main.c    **** 
 116:Src/main.c    **** void error_alert(char *msg)
 117:Src/main.c    **** {
 118:Src/main.c    ****     char str[100];
 119:Src/main.c    ****     HAL_NVIC_DisableIRQ(TIM2_IRQn);
 120:Src/main.c    ****     HAL_NVIC_DisableIRQ(TIM3_IRQn);
 121:Src/main.c    **** 
 122:Src/main.c    ****     HAL_GPIO_WritePin(ERROR_LED_GPIO_Port, ERROR_LED_Pin, GPIO_PIN_SET);
 123:Src/main.c    ****     
 124:Src/main.c    ****     sprintf(str, "{\"type\":\"error\",\"text\":\"%s\"}\n\r", msg);
 125:Src/main.c    ****     HAL_UART_Transmit(&huart1, str, strlen(str), 100);
 126:Src/main.c    ****     
 127:Src/main.c    ****     HAL_Delay(500);
 128:Src/main.c    **** 
 129:Src/main.c    ****     HAL_GPIO_WritePin(ERROR_LED_GPIO_Port, ERROR_LED_Pin, GPIO_PIN_RESET);
 130:Src/main.c    ****     
 131:Src/main.c    ****     HAL_NVIC_SystemReset();
 132:Src/main.c    **** }
 133:Src/main.c    **** 
 134:Src/main.c    **** /* -- Servomotors -- */
 135:Src/main.c    **** void init_servomotors()
 136:Src/main.c    **** {
 137:Src/main.c    ****     servo_status_t r;
 138:Src/main.c    ****     
 139:Src/main.c    ****     r = servo_init(&servo_roll, &htim3, TIM_CHANNEL_1);
 140:Src/main.c    ****     if(r != SERVO_STATUS_OK) error_alert("Cannot init servo_roll");
 141:Src/main.c    **** 
 142:Src/main.c    ****     r = servo_init(&servo_pitch, &htim3, TIM_CHANNEL_2);
 143:Src/main.c    ****     if(r != SERVO_STATUS_OK) error_alert("Cannot init servo_pitch");
 144:Src/main.c    **** 
 145:Src/main.c    ****     servo_set_offset(&servo_roll, 90);
 146:Src/main.c    ****     servo_set_offset(&servo_pitch, 60);
 147:Src/main.c    **** }
 148:Src/main.c    **** 
ARM GAS  /tmp/ccDrtRJY.s 			page 4


 149:Src/main.c    **** void init_servomotors_motion()
 150:Src/main.c    **** {
 151:Src/main.c    ****     HAL_TIM_Base_Start_IT(&htim3);
 152:Src/main.c    **** }
 153:Src/main.c    **** 
 154:Src/main.c    **** void servo_update()
 155:Src/main.c    **** {
 156:Src/main.c    ****     servo_set_position(&servo_roll, roll_compensation);
 157:Src/main.c    ****     servo_set_position(&servo_pitch, pitch_compensation);
 158:Src/main.c    **** }
 159:Src/main.c    **** 
 160:Src/main.c    **** /* -- Sensors -- */
 161:Src/main.c    **** void init_position_sensor()
 162:Src/main.c    **** {
 163:Src/main.c    ****     sensor_roll = 0;
 164:Src/main.c    ****     sensor_pitch = 0;
 165:Src/main.c    ****     sensor_factor = DEFAULT_FACTOR;
 166:Src/main.c    **** 
 167:Src/main.c    ****     HAL_Delay(500);
 168:Src/main.c    ****     
 169:Src/main.c    ****     SD_MPU6050_Result r;
 170:Src/main.c    ****     r = SD_MPU6050_Init(&hi2c2, &position_sensor, SD_MPU6050_Device_0, SD_MPU6050_Accelerometer_2G,
 171:Src/main.c    ****     
 172:Src/main.c    ****     if(r != SD_MPU6050_Result_Ok)
 173:Src/main.c    ****     {
 174:Src/main.c    ****         error_alert("Cannot init MPU6050");
 175:Src/main.c    ****     }
 176:Src/main.c    ****     
 177:Src/main.c    ****     sensor_calc_position(&sensor_pitch, &sensor_roll);
 178:Src/main.c    ****     HAL_TIM_Base_Start_IT(&htim4);
 179:Src/main.c    **** }
 180:Src/main.c    **** 
 181:Src/main.c    **** #define MPU6050_I2C_ADDR	0xD0
 182:Src/main.c    **** #define MPU6050_I_AM	0x68
 183:Src/main.c    **** #define MPU6050_WHO_AM_I 0x75
 184:Src/main.c    **** 
 185:Src/main.c    **** /**
 186:Src/main.c    ****  * @brief Test the connection with the MPU6050 sensor. For bad connection, reset the MCU.
 187:Src/main.c    ****  */
 188:Src/main.c    **** void test_sensor()
 189:Src/main.c    **** {
 190:Src/main.c    ****     uint8_t temp;
 191:Src/main.c    ****     uint8_t WHO_AM_I = (uint8_t)MPU6050_WHO_AM_I;
 192:Src/main.c    ****     SD_MPU6050_Result r;
 193:Src/main.c    **** 
 194:Src/main.c    ****     /* Check who am I */
 195:Src/main.c    **** 	  //------------------
 196:Src/main.c    **** 		/* Send address */
 197:Src/main.c    **** 		if(HAL_I2C_Master_Transmit(&hi2c2, MPU6050_I2C_ADDR, &WHO_AM_I, 1, 1000) != HAL_OK)
 198:Src/main.c    **** 		{
 199:Src/main.c    ****         error_alert("MPU6050 connection fail");
 200:Src/main.c    **** 		}
 201:Src/main.c    **** 
 202:Src/main.c    **** 		/* Receive multiple byte */
 203:Src/main.c    **** 		if(HAL_I2C_Master_Receive(&hi2c2, MPU6050_I2C_ADDR, &temp, 1, 1000) != HAL_OK)
 204:Src/main.c    **** 		{
 205:Src/main.c    ****         error_alert("MPU6050 connection fail");
ARM GAS  /tmp/ccDrtRJY.s 			page 5


 206:Src/main.c    **** 		}
 207:Src/main.c    **** 
 208:Src/main.c    **** 		/* Checking */
 209:Src/main.c    **** 		if(temp != MPU6050_I_AM)
 210:Src/main.c    **** 		{
 211:Src/main.c    **** 				error_alert("MPU6050 connection fail");
 212:Src/main.c    **** 		}
 213:Src/main.c    **** 	  //------------------
 214:Src/main.c    **** }
 215:Src/main.c    **** 
 216:Src/main.c    **** 
 217:Src/main.c    **** /**
 218:Src/main.c    ****  * @brief Update position and compensation informations
 219:Src/main.c    ****  */
 220:Src/main.c    **** void update_position_sensor()
 221:Src/main.c    **** {
 222:Src/main.c    ****     HAL_GPIO_WritePin(UPDATE_LED_GPIO_Port, UPDATE_LED_Pin, GPIO_PIN_SET);
 223:Src/main.c    ****     
 224:Src/main.c    ****     test_sensor();
 225:Src/main.c    ****     SD_MPU6050_Result r;
 226:Src/main.c    ****     r = SD_MPU6050_ReadAccelerometer(&hi2c2, &position_sensor);
 227:Src/main.c    ****     if(r != SD_MPU6050_Result_Ok)
 228:Src/main.c    ****     {
 229:Src/main.c    ****         error_alert("Cannot read MPU6050 Read Acce");
 230:Src/main.c    ****     }
 231:Src/main.c    **** 
 232:Src/main.c    ****     sensor_calc_position(&sensor_pitch, &sensor_roll);
 233:Src/main.c    ****     roll_compensation = maf_filter(&roll_filter, sensor_roll);
 234:Src/main.c    ****     pitch_compensation = -maf_filter(&pitch_filter, sensor_pitch);
 235:Src/main.c    **** 
 236:Src/main.c    ****     HAL_GPIO_WritePin(UPDATE_LED_GPIO_Port, UPDATE_LED_Pin, GPIO_PIN_RESET);
 237:Src/main.c    **** }
 238:Src/main.c    **** 
 239:Src/main.c    **** 
 240:Src/main.c    **** #define SQUARE(v) ((v)*(v))
 241:Src/main.c    **** void sensor_calc_position(float *pitch, float *roll)
 242:Src/main.c    **** {
 243:Src/main.c    ****     *pitch = 180 * atan (position_sensor.Accelerometer_X/sqrt(SQUARE(position_sensor.Accelerometer_
 244:Src/main.c    ****     *roll = 180 * atan (position_sensor.Accelerometer_Y/sqrt(SQUARE(position_sensor.Accelerometer_X
 245:Src/main.c    ****     *pitch *= sensor_factor;
 246:Src/main.c    ****     *roll *= sensor_factor;
 247:Src/main.c    **** }
 248:Src/main.c    **** 
 249:Src/main.c    **** /* --- Smoothing -- */
 250:Src/main.c    **** 
 251:Src/main.c    **** 
 252:Src/main.c    **** /**
 253:Src/main.c    ****  * @brief Reset MAF with a new buffer length
 254:Src/main.c    ****  */
 255:Src/main.c    **** void change_smoothing(size_t value)
 256:Src/main.c    **** {
 257:Src/main.c    ****     HAL_NVIC_DisableIRQ(TIM3_IRQn);
 258:Src/main.c    ****     HAL_NVIC_DisableIRQ(TIM4_IRQn);
 259:Src/main.c    ****     
 260:Src/main.c    ****     servo_set_position(&servo_roll, 0);
 261:Src/main.c    ****     servo_set_position(&servo_pitch, 0);
 262:Src/main.c    **** 
ARM GAS  /tmp/ccDrtRJY.s 			page 6


 263:Src/main.c    ****     smoothing = value;
 264:Src/main.c    ****     
 265:Src/main.c    ****     delete_maf(&roll_filter);
 266:Src/main.c    ****     delete_maf(&pitch_filter);
 267:Src/main.c    **** 
 268:Src/main.c    ****     init_maf(&roll_filter, smoothing);
 269:Src/main.c    ****     init_maf(&pitch_filter, smoothing);
 270:Src/main.c    ****     
 271:Src/main.c    ****     HAL_NVIC_EnableIRQ(TIM4_IRQn);
 272:Src/main.c    ****     HAL_NVIC_EnableIRQ(TIM3_IRQn);
 273:Src/main.c    **** }
 274:Src/main.c    **** 
 275:Src/main.c    **** /* -- UART messaging -- */
 276:Src/main.c    **** 
 277:Src/main.c    **** 
 278:Src/main.c    **** /**
 279:Src/main.c    ****  * @brief Send position & compensation infos to TTL
 280:Src/main.c    ****  */
 281:Src/main.c    **** void uart_message_update()
 282:Src/main.c    **** {
 283:Src/main.c    ****     send_angle_pack(SENSOR_ANGLE_PACK, sensor_pitch, sensor_roll);
 284:Src/main.c    ****     send_angle_pack(SERVO_ANGLE_PACK, pitch_compensation, roll_compensation);
 285:Src/main.c    **** }
 286:Src/main.c    **** 
 287:Src/main.c    **** 
 288:Src/main.c    **** /**
 289:Src/main.c    ****  * @brief Initialize messaging timer interruptions
 290:Src/main.c    ****  */
 291:Src/main.c    **** void init_uart_messaging()
 292:Src/main.c    **** {
 293:Src/main.c    ****     HAL_TIM_Base_Start_IT(&htim2);
 294:Src/main.c    **** }
 295:Src/main.c    **** 
 296:Src/main.c    **** void send_value_pack(value_pack_target_t target, float value)
 297:Src/main.c    **** {
 298:Src/main.c    ****     char value_pack_str[100];
 299:Src/main.c    ****     char value_str[10];
 300:Src/main.c    ****     float_to_string(value, value_str);
 301:Src/main.c    **** 
 302:Src/main.c    ****     if(target == SMOOTHING_VALUE_PACK)
 303:Src/main.c    ****     {
 304:Src/main.c    ****         sprintf(value_pack_str, "{\"type\":\"value\", \"target\",\"smoothing\", \"value\":%s}\n", v
 305:Src/main.c    ****     }
 306:Src/main.c    ****     else //FACTOR_VALUE_PACK
 307:Src/main.c    ****     {
 308:Src/main.c    ****         sprintf(value_pack_str, "{\"type\":\"value\", \"target\",\"factor\", \"value\":%s}\n", valu
 309:Src/main.c    ****     }
 310:Src/main.c    **** }
 311:Src/main.c    **** 
 312:Src/main.c    **** void send_angle_pack(angle_pack_target_t target, float pitch, float roll)
 313:Src/main.c    **** {
 314:Src/main.c    ****     char angle_pack_str[100];
 315:Src/main.c    **** 
 316:Src/main.c    **** #ifdef ROUND_ANGLE_PACK
 317:Src/main.c    ****     if(target == SENSOR_ANGLE_PACK)
 318:Src/main.c    ****     {
 319:Src/main.c    ****         sprintf(angle_pack_str, "{\"type\":\"angle\",\"pitch\":%d,\"roll\":%d, \"target\":\"sensor\
ARM GAS  /tmp/ccDrtRJY.s 			page 7


 320:Src/main.c    ****     }
 321:Src/main.c    ****     else //SERVO_ANGLE_PACK
 322:Src/main.c    ****     {
 323:Src/main.c    ****         sprintf(angle_pack_str, "{\"type\":\"angle\",\"pitch\":%d,\"roll\":%d, \"target\":\"servo\"
 324:Src/main.c    ****     }
 325:Src/main.c    ****     
 326:Src/main.c    **** #else
 327:Src/main.c    ****     char roll_str[20], pitch_str[20];
 328:Src/main.c    **** 
 329:Src/main.c    ****     float_to_string(roll, roll_str);
 330:Src/main.c    ****     float_to_string(pitch, pitch_str);
 331:Src/main.c    ****     
 332:Src/main.c    ****     if(target == SENSOR_ANGLE_PACK)
 333:Src/main.c    ****     {
 334:Src/main.c    ****         sprintf(angle_pack_str, "{\"type\":\"angle\",\"pitch\":%s,\"roll\":%s, \"target\":\"sensor\
 335:Src/main.c    ****     }
 336:Src/main.c    ****     else if(target == OFFSET_ANGLE_PACK)
 337:Src/main.c    ****     {
 338:Src/main.c    ****         sprintf(angle_pack_str, "{\"type\":\"angle\",\"pitch\":%s,\"roll\":%s, \"target\":\"offset\
 339:Src/main.c    ****     }
 340:Src/main.c    ****     else //SERVO_ANGLE_PACK
 341:Src/main.c    ****     {
 342:Src/main.c    ****         sprintf(angle_pack_str, "{\"type\":\"angle\",\"pitch\":%s,\"roll\":%s, \"target\":\"servo\"
 343:Src/main.c    ****     }
 344:Src/main.c    **** #endif
 345:Src/main.c    **** 
 346:Src/main.c    ****     HAL_UART_Transmit(&huart1, angle_pack_str, strlen(angle_pack_str), 100);
 347:Src/main.c    **** }
 348:Src/main.c    **** 
 349:Src/main.c    **** void send_echo_pack(char *msg)
 350:Src/main.c    **** {
 351:Src/main.c    ****     char echo_pack_str[100];
 352:Src/main.c    ****     sprintf(echo_pack_str, "{\"type\":\"echo\",\"text\":\"%s\"}\n", msg);
 353:Src/main.c    ****     HAL_UART_Transmit(&huart1, echo_pack_str, strlen(echo_pack_str), 100);
 354:Src/main.c    **** }
 355:Src/main.c    **** 
 356:Src/main.c    **** void send_message_pack(char *msg)
 357:Src/main.c    **** {
 358:Src/main.c    ****     char message_pack_str[100];
 359:Src/main.c    ****     sprintf(message_pack_str, "{\"type\":\"message\",\"text\":\"%s\"}\n", msg);
 360:Src/main.c    ****     HAL_UART_Transmit(&huart1, message_pack_str, strlen(message_pack_str), 100);
 361:Src/main.c    **** }
 362:Src/main.c    **** 
 363:Src/main.c    **** /* --- Mailbox --- */
 364:Src/main.c    **** 
 365:Src/main.c    **** char mailbox_buffer[50];
 366:Src/main.c    **** 
 367:Src/main.c    **** void init_mailbox()
 368:Src/main.c    **** {
 369:Src/main.c    **** }
 370:Src/main.c    **** 
 371:Src/main.c    **** /**
 372:Src/main.c    ****  * @brief UART RX IRQ callback
 373:Src/main.c    ****  */
 374:Src/main.c    **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)
 375:Src/main.c    **** {
 376:Src/main.c    ****   for(int i = 0; i < 50; i++)
ARM GAS  /tmp/ccDrtRJY.s 			page 8


 377:Src/main.c    ****   {
 378:Src/main.c    ****       if(mailbox_buffer[i] == '\n')
 379:Src/main.c    ****       { 
 380:Src/main.c    ****           mailbox_buffer[i] = '\0';
 381:Src/main.c    ****           //send_echo_pack(mailbox_buffer);
 382:Src/main.c    ****           mailbox_message_received(mailbox_buffer);
 383:Src/main.c    ****           return;
 384:Src/main.c    ****       }
 385:Src/main.c    ****   }
 386:Src/main.c    **** 
 387:Src/main.c    ****   mailbox_buffer[49] = '\0';
 388:Src/main.c    ****   mailbox_message_received(mailbox_buffer);
 389:Src/main.c    **** }
 390:Src/main.c    **** 
 391:Src/main.c    **** void mailbox_listen()
 392:Src/main.c    **** {
 393:Src/main.c    ****     HAL_UART_Receive_IT(&huart1, mailbox_buffer, 50);
 394:Src/main.c    **** }
 395:Src/main.c    **** 
 396:Src/main.c    **** void mailbox_message_received(char *message)
 397:Src/main.c    **** {
 398:Src/main.c    ****     if(strcmp(message, "pause") == 0)
 399:Src/main.c    ****     {
 400:Src/main.c    ****         HAL_NVIC_DisableIRQ(TIM3_IRQn);
 401:Src/main.c    ****         HAL_NVIC_DisableIRQ(TIM4_IRQn);
 402:Src/main.c    ****     }
 403:Src/main.c    ****     else if(strcmp(message, "resume") == 0)
 404:Src/main.c    ****     {
 405:Src/main.c    ****         HAL_NVIC_EnableIRQ(TIM4_IRQn);
 406:Src/main.c    ****         HAL_NVIC_EnableIRQ(TIM3_IRQn);
 407:Src/main.c    ****     }
 408:Src/main.c    ****     else
 409:Src/main.c    ****     {
 410:Src/main.c    ****         #if 0 /* problematic code */
 411:Src/main.c    ****         char pack_type[100];
 412:Src/main.c    ****         char pack_param[100];
 413:Src/main.c    ****         int pack_value;
 414:Src/main.c    ****         int pack_exp;
 415:Src/main.c    **** 
 416:Src/main.c    ****         sscanf(message, "type %s param %s value %de%d", pack_type, pack_param, &pack_value, &pack_e
 417:Src/main.c    ****         float float_value = 0;
 418:Src/main.c    ****         float_value = (float)pack_value * pow(10, pack_exp);
 419:Src/main.c    **** 
 420:Src/main.c    ****         //send_message_pack(pack_type);
 421:Src/main.c    ****         //send_message_pack(pack_param);
 422:Src/main.c    ****         //send_value_pack(SMOOTHING_VALUE_PACK, float_value);        
 423:Src/main.c    ****         
 424:Src/main.c    ****         if(strcmp(pack_type, "get") == 0)
 425:Src/main.c    ****         {
 426:Src/main.c    ****             if(strcmp(pack_param, "sensor") == 0)
 427:Src/main.c    ****             {
 428:Src/main.c    ****                 send_angle_pack(SENSOR_ANGLE_PACK, sensor_pitch, sensor_roll);
 429:Src/main.c    ****             }
 430:Src/main.c    ****             else if(strcmp(pack_param, "servo") == 0)
 431:Src/main.c    ****             {
 432:Src/main.c    ****                 send_angle_pack(SERVO_ANGLE_PACK, pitch_compensation, roll_compensation);
 433:Src/main.c    ****             }
ARM GAS  /tmp/ccDrtRJY.s 			page 9


 434:Src/main.c    ****             else if(strcmp(pack_param, "factor") == 0)
 435:Src/main.c    ****             {
 436:Src/main.c    ****                 send_value_pack(FACTOR_VALUE_PACK, sensor_factor);
 437:Src/main.c    ****             }
 438:Src/main.c    ****             else if(strcmp(pack_param, "smoothing") == 0)
 439:Src/main.c    ****             {
 440:Src/main.c    ****                 send_value_pack(SMOOTHING_VALUE_PACK, (float)smoothing);
 441:Src/main.c    ****             }
 442:Src/main.c    ****             else if(strcmp(pack_param, "offset") == 0)
 443:Src/main.c    ****             {
 444:Src/main.c    ****                 send_angle_pack(OFFSET_ANGLE_PACK, servo_pitch.offset, servo_roll.offset);
 445:Src/main.c    ****             }
 446:Src/main.c    ****             else
 447:Src/main.c    ****             {
 448:Src/main.c    ****                 send_message_pack("undefined param");
 449:Src/main.c    ****             }
 450:Src/main.c    ****         }
 451:Src/main.c    ****         else if(strcmp(pack_type, "set") == 0)
 452:Src/main.c    ****         {
 453:Src/main.c    ****             if(strcmp(pack_param, "servo_pitch") == 0)
 454:Src/main.c    ****             {
 455:Src/main.c    ****                 pitch_compensation = float_value;
 456:Src/main.c    ****                 servo_set_position(&servo_pitch, pitch_compensation);
 457:Src/main.c    ****             }
 458:Src/main.c    ****             else if(strcmp(pack_param, "servo_roll") == 0)
 459:Src/main.c    ****             {
 460:Src/main.c    ****                 roll_compensation = float_value;
 461:Src/main.c    ****                 servo_set_position(&servo_roll, roll_compensation);
 462:Src/main.c    ****             }
 463:Src/main.c    ****             else if(strcmp(pack_param, "roll_offset") == 0)
 464:Src/main.c    ****             {
 465:Src/main.c    ****                 servo_set_offset(&servo_roll, float_value);
 466:Src/main.c    ****             }
 467:Src/main.c    ****             else if(strcmp(pack_param, "pitch_offset") == 0)
 468:Src/main.c    ****             {
 469:Src/main.c    ****                 servo_set_offset(&servo_pitch, float_value);
 470:Src/main.c    ****             }
 471:Src/main.c    ****             else if(strcmp(pack_param, "sensor_factor") == 0)
 472:Src/main.c    ****             {
 473:Src/main.c    ****                 sensor_factor = float_value;
 474:Src/main.c    ****             }
 475:Src/main.c    ****             else if(strcmp(pack_param, "sensor_smoothing") == 0)
 476:Src/main.c    ****             {
 477:Src/main.c    ****                 change_smoothing((int)float_value);
 478:Src/main.c    ****             }
 479:Src/main.c    ****             else
 480:Src/main.c    ****             {
 481:Src/main.c    ****                 send_message_pack("undefined param");
 482:Src/main.c    ****             }
 483:Src/main.c    ****         }
 484:Src/main.c    ****         else
 485:Src/main.c    ****         {
 486:Src/main.c    ****             send_message_pack("undefined pack type");
 487:Src/main.c    ****         }
 488:Src/main.c    ****         #endif
 489:Src/main.c    ****     }
 490:Src/main.c    **** }
ARM GAS  /tmp/ccDrtRJY.s 			page 10


 491:Src/main.c    **** 
 492:Src/main.c    **** /* USER CODE END 0 */
 493:Src/main.c    **** 
 494:Src/main.c    **** /**
 495:Src/main.c    ****   * @brief  The application entry point.
 496:Src/main.c    ****   * @retval int
 497:Src/main.c    ****   */
 498:Src/main.c    **** int main(void)
 499:Src/main.c    **** {
 500:Src/main.c    ****   /* USER CODE BEGIN 1 */
 501:Src/main.c    **** 
 502:Src/main.c    ****   /* USER CODE END 1 */
 503:Src/main.c    ****   
 504:Src/main.c    **** 
 505:Src/main.c    ****   /* MCU Configuration--------------------------------------------------------*/
 506:Src/main.c    **** 
 507:Src/main.c    ****   /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
 508:Src/main.c    ****   HAL_Init();
 509:Src/main.c    **** 
 510:Src/main.c    ****   /* USER CODE BEGIN Init */
 511:Src/main.c    **** 
 512:Src/main.c    ****   /* USER CODE END Init */
 513:Src/main.c    **** 
 514:Src/main.c    ****   /* Configure the system clock */
 515:Src/main.c    ****   SystemClock_Config();
 516:Src/main.c    **** 
 517:Src/main.c    ****   /* USER CODE BEGIN SysInit */
 518:Src/main.c    **** 
 519:Src/main.c    ****   /* USER CODE END SysInit */
 520:Src/main.c    **** 
 521:Src/main.c    ****   /* Initialize all configured peripherals */
 522:Src/main.c    ****   MX_GPIO_Init();
 523:Src/main.c    ****   MX_I2C2_Init();
 524:Src/main.c    ****   MX_TIM2_Init();
 525:Src/main.c    ****   MX_TIM3_Init();
 526:Src/main.c    ****   MX_USART1_UART_Init();
 527:Src/main.c    ****   MX_RTC_Init();
 528:Src/main.c    ****   MX_TIM4_Init();
 529:Src/main.c    ****   /* USER CODE BEGIN 2 */
 530:Src/main.c    **** 
 531:Src/main.c    ****   init_system();
 532:Src/main.c    ****   //servo_init(&servo_roll, &htim3, SERVO_ROLL_CHANNEL);
 533:Src/main.c    ****   //servo_init(&servo_pitch, &htim3, SERVO_PITCH_CHANNEL);
 534:Src/main.c    ****   //servo_set_offset(&servo_pitch, 90);
 535:Src/main.c    ****   //servo_set_offset(&servo_roll, 90);
 536:Src/main.c    ****   //servo_set_position(&servo_roll, 90);
 537:Src/main.c    ****   //servo_set_position(&servo_pitch, 90);
 538:Src/main.c    ****   /* USER CODE END 2 */
 539:Src/main.c    ****  
 540:Src/main.c    ****  
 541:Src/main.c    **** 
 542:Src/main.c    ****   /* Infinite loop */
 543:Src/main.c    ****   /* USER CODE BEGIN WHILE */
 544:Src/main.c    ****   while (1)
 545:Src/main.c    ****   {
 546:Src/main.c    ****     //HAL_Delay(1000);
 547:Src/main.c    ****     //servo_set_position(&servo_roll, 30);
ARM GAS  /tmp/ccDrtRJY.s 			page 11


 548:Src/main.c    ****     //servo_set_position(&servo_pitch, 30);
 549:Src/main.c    ****     //HAL_Delay(1000);
 550:Src/main.c    ****     //servo_set_position(&servo_roll, -30);
 551:Src/main.c    ****     //servo_set_position(&servo_pitch, -30);
 552:Src/main.c    ****     mailbox_listen();
 553:Src/main.c    ****     /* USER CODE END WHILE */
 554:Src/main.c    **** 
 555:Src/main.c    ****     /* USER CODE BEGIN 3 */
 556:Src/main.c    ****   }
 557:Src/main.c    ****   /* USER CODE END 3 */
 558:Src/main.c    **** }
 559:Src/main.c    **** 
 560:Src/main.c    **** /**
 561:Src/main.c    ****   * @brief System Clock Configuration
 562:Src/main.c    ****   * @retval None
 563:Src/main.c    ****   */
 564:Src/main.c    **** void SystemClock_Config(void)
 565:Src/main.c    **** {
 566:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 567:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 568:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 569:Src/main.c    **** 
 570:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks 
 571:Src/main.c    ****   */
 572:Src/main.c    ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI|RCC_OSCILLATORTYPE_LSI;
 573:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 574:Src/main.c    ****   RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
 575:Src/main.c    ****   RCC_OscInitStruct.LSIState = RCC_LSI_ON;
 576:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 577:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI_DIV2;
 578:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL2;
 579:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 580:Src/main.c    ****   {
 581:Src/main.c    ****     Error_Handler();
 582:Src/main.c    ****   }
 583:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks 
 584:Src/main.c    ****   */
 585:Src/main.c    ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 586:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 587:Src/main.c    ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 588:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 589:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 590:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 591:Src/main.c    **** 
 592:Src/main.c    ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_0) != HAL_OK)
 593:Src/main.c    ****   {
 594:Src/main.c    ****     Error_Handler();
 595:Src/main.c    ****   }
 596:Src/main.c    ****   PeriphClkInit.PeriphClockSelection = RCC_PERIPHCLK_RTC;
 597:Src/main.c    ****   PeriphClkInit.RTCClockSelection = RCC_RTCCLKSOURCE_LSI;
 598:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 599:Src/main.c    ****   {
 600:Src/main.c    ****     Error_Handler();
 601:Src/main.c    ****   }
 602:Src/main.c    **** }
 603:Src/main.c    **** 
 604:Src/main.c    **** /**
ARM GAS  /tmp/ccDrtRJY.s 			page 12


 605:Src/main.c    ****   * @brief I2C2 Initialization Function
 606:Src/main.c    ****   * @param None
 607:Src/main.c    ****   * @retval None
 608:Src/main.c    ****   */
 609:Src/main.c    **** static void MX_I2C2_Init(void)
 610:Src/main.c    **** {
 611:Src/main.c    **** 
 612:Src/main.c    ****   /* USER CODE BEGIN I2C2_Init 0 */
 613:Src/main.c    **** 
 614:Src/main.c    ****   /* USER CODE END I2C2_Init 0 */
 615:Src/main.c    **** 
 616:Src/main.c    ****   /* USER CODE BEGIN I2C2_Init 1 */
 617:Src/main.c    **** 
 618:Src/main.c    ****   /* USER CODE END I2C2_Init 1 */
 619:Src/main.c    ****   hi2c2.Instance = I2C2;
 620:Src/main.c    ****   hi2c2.Init.ClockSpeed = 400000;
 621:Src/main.c    ****   hi2c2.Init.DutyCycle = I2C_DUTYCYCLE_2;
 622:Src/main.c    ****   hi2c2.Init.OwnAddress1 = 0;
 623:Src/main.c    ****   hi2c2.Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
 624:Src/main.c    ****   hi2c2.Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
 625:Src/main.c    ****   hi2c2.Init.OwnAddress2 = 0;
 626:Src/main.c    ****   hi2c2.Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
 627:Src/main.c    ****   hi2c2.Init.NoStretchMode = I2C_NOSTRETCH_DISABLE;
 628:Src/main.c    ****   if (HAL_I2C_Init(&hi2c2) != HAL_OK)
 629:Src/main.c    ****   {
 630:Src/main.c    ****     Error_Handler();
 631:Src/main.c    ****   }
 632:Src/main.c    ****   /* USER CODE BEGIN I2C2_Init 2 */
 633:Src/main.c    **** 
 634:Src/main.c    ****   /* USER CODE END I2C2_Init 2 */
 635:Src/main.c    **** 
 636:Src/main.c    **** }
 637:Src/main.c    **** 
 638:Src/main.c    **** /**
 639:Src/main.c    ****   * @brief RTC Initialization Function
 640:Src/main.c    ****   * @param None
 641:Src/main.c    ****   * @retval None
 642:Src/main.c    ****   */
 643:Src/main.c    **** static void MX_RTC_Init(void)
 644:Src/main.c    **** {
 645:Src/main.c    **** 
 646:Src/main.c    ****   /* USER CODE BEGIN RTC_Init 0 */
 647:Src/main.c    **** 
 648:Src/main.c    ****   /* USER CODE END RTC_Init 0 */
 649:Src/main.c    **** 
 650:Src/main.c    ****   /* USER CODE BEGIN RTC_Init 1 */
 651:Src/main.c    **** 
 652:Src/main.c    ****   /* USER CODE END RTC_Init 1 */
 653:Src/main.c    ****   /** Initialize RTC Only 
 654:Src/main.c    ****   */
 655:Src/main.c    ****   hrtc.Instance = RTC;
 656:Src/main.c    ****   hrtc.Init.AsynchPrediv = RTC_AUTO_1_SECOND;
 657:Src/main.c    ****   hrtc.Init.OutPut = RTC_OUTPUTSOURCE_ALARM;
 658:Src/main.c    ****   if (HAL_RTC_Init(&hrtc) != HAL_OK)
 659:Src/main.c    ****   {
 660:Src/main.c    ****     Error_Handler();
 661:Src/main.c    ****   }
ARM GAS  /tmp/ccDrtRJY.s 			page 13


 662:Src/main.c    ****   /* USER CODE BEGIN RTC_Init 2 */
 663:Src/main.c    **** 
 664:Src/main.c    ****   /* USER CODE END RTC_Init 2 */
 665:Src/main.c    **** 
 666:Src/main.c    **** }
 667:Src/main.c    **** 
 668:Src/main.c    **** /**
 669:Src/main.c    ****   * @brief TIM2 Initialization Function
 670:Src/main.c    ****   * @param None
 671:Src/main.c    ****   * @retval None
 672:Src/main.c    ****   */
 673:Src/main.c    **** static void MX_TIM2_Init(void)
 674:Src/main.c    **** {
 675:Src/main.c    **** 
 676:Src/main.c    ****   /* USER CODE BEGIN TIM2_Init 0 */
 677:Src/main.c    **** 
 678:Src/main.c    ****   /* USER CODE END TIM2_Init 0 */
 679:Src/main.c    **** 
 680:Src/main.c    ****   TIM_ClockConfigTypeDef sClockSourceConfig = {0};
 681:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig = {0};
 682:Src/main.c    **** 
 683:Src/main.c    ****   /* USER CODE BEGIN TIM2_Init 1 */
 684:Src/main.c    **** 
 685:Src/main.c    ****   /* USER CODE END TIM2_Init 1 */
 686:Src/main.c    ****   htim2.Instance = TIM2;
 687:Src/main.c    ****   htim2.Init.Prescaler = 9000;
 688:Src/main.c    ****   htim2.Init.CounterMode = TIM_COUNTERMODE_UP;
 689:Src/main.c    ****   htim2.Init.Period = 60;
 690:Src/main.c    ****   htim2.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 691:Src/main.c    ****   htim2.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 692:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim2) != HAL_OK)
 693:Src/main.c    ****   {
 694:Src/main.c    ****     Error_Handler();
 695:Src/main.c    ****   }
 696:Src/main.c    ****   sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
 697:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim2, &sClockSourceConfig) != HAL_OK)
 698:Src/main.c    ****   {
 699:Src/main.c    ****     Error_Handler();
 700:Src/main.c    ****   }
 701:Src/main.c    ****   sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;
 702:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 703:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim2, &sMasterConfig) != HAL_OK)
 704:Src/main.c    ****   {
 705:Src/main.c    ****     Error_Handler();
 706:Src/main.c    ****   }
 707:Src/main.c    ****   /* USER CODE BEGIN TIM2_Init 2 */
 708:Src/main.c    **** 
 709:Src/main.c    ****   /* USER CODE END TIM2_Init 2 */
 710:Src/main.c    **** 
 711:Src/main.c    **** }
 712:Src/main.c    **** 
 713:Src/main.c    **** /**
 714:Src/main.c    ****   * @brief TIM3 Initialization Function
 715:Src/main.c    ****   * @param None
 716:Src/main.c    ****   * @retval None
 717:Src/main.c    ****   */
 718:Src/main.c    **** static void MX_TIM3_Init(void)
ARM GAS  /tmp/ccDrtRJY.s 			page 14


 719:Src/main.c    **** {
 720:Src/main.c    **** 
 721:Src/main.c    ****   /* USER CODE BEGIN TIM3_Init 0 */
 722:Src/main.c    **** 
 723:Src/main.c    ****   /* USER CODE END TIM3_Init 0 */
 724:Src/main.c    **** 
 725:Src/main.c    ****   TIM_ClockConfigTypeDef sClockSourceConfig = {0};
 726:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig = {0};
 727:Src/main.c    ****   TIM_OC_InitTypeDef sConfigOC = {0};
 728:Src/main.c    **** 
 729:Src/main.c    ****   /* USER CODE BEGIN TIM3_Init 1 */
 730:Src/main.c    **** 
 731:Src/main.c    ****   /* USER CODE END TIM3_Init 1 */
 732:Src/main.c    ****   htim3.Instance = TIM3;
 733:Src/main.c    ****   htim3.Init.Prescaler = 16;
 734:Src/main.c    ****   htim3.Init.CounterMode = TIM_COUNTERMODE_UP;
 735:Src/main.c    ****   htim3.Init.Period = 10000;
 736:Src/main.c    ****   htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 737:Src/main.c    ****   htim3.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 738:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim3) != HAL_OK)
 739:Src/main.c    ****   {
 740:Src/main.c    ****     Error_Handler();
 741:Src/main.c    ****   }
 742:Src/main.c    ****   sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
 743:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim3, &sClockSourceConfig) != HAL_OK)
 744:Src/main.c    ****   {
 745:Src/main.c    ****     Error_Handler();
 746:Src/main.c    ****   }
 747:Src/main.c    ****   if (HAL_TIM_PWM_Init(&htim3) != HAL_OK)
 748:Src/main.c    ****   {
 749:Src/main.c    ****     Error_Handler();
 750:Src/main.c    ****   }
 751:Src/main.c    ****   sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;
 752:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 753:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim3, &sMasterConfig) != HAL_OK)
 754:Src/main.c    ****   {
 755:Src/main.c    ****     Error_Handler();
 756:Src/main.c    ****   }
 757:Src/main.c    ****   sConfigOC.OCMode = TIM_OCMODE_PWM1;
 758:Src/main.c    ****   sConfigOC.Pulse = 0;
 759:Src/main.c    ****   sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH;
 760:Src/main.c    ****   sConfigOC.OCFastMode = TIM_OCFAST_DISABLE;
 761:Src/main.c    ****   if (HAL_TIM_PWM_ConfigChannel(&htim3, &sConfigOC, TIM_CHANNEL_1) != HAL_OK)
 762:Src/main.c    ****   {
 763:Src/main.c    ****     Error_Handler();
 764:Src/main.c    ****   }
 765:Src/main.c    ****   if (HAL_TIM_PWM_ConfigChannel(&htim3, &sConfigOC, TIM_CHANNEL_2) != HAL_OK)
 766:Src/main.c    ****   {
 767:Src/main.c    ****     Error_Handler();
 768:Src/main.c    ****   }
 769:Src/main.c    ****   /* USER CODE BEGIN TIM3_Init 2 */
 770:Src/main.c    ****   
 771:Src/main.c    ****   /* USER CODE END TIM3_Init 2 */
 772:Src/main.c    ****   HAL_TIM_MspPostInit(&htim3);
 773:Src/main.c    **** 
 774:Src/main.c    **** }
 775:Src/main.c    **** 
ARM GAS  /tmp/ccDrtRJY.s 			page 15


 776:Src/main.c    **** /**
 777:Src/main.c    ****   * @brief TIM4 Initialization Function
 778:Src/main.c    ****   * @param None
 779:Src/main.c    ****   * @retval None
 780:Src/main.c    ****   */
 781:Src/main.c    **** static void MX_TIM4_Init(void)
 782:Src/main.c    **** {
 783:Src/main.c    **** 
 784:Src/main.c    ****   /* USER CODE BEGIN TIM4_Init 0 */
 785:Src/main.c    **** 
 786:Src/main.c    ****   /* USER CODE END TIM4_Init 0 */
 787:Src/main.c    **** 
 788:Src/main.c    ****   TIM_ClockConfigTypeDef sClockSourceConfig = {0};
 789:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig = {0};
 790:Src/main.c    **** 
 791:Src/main.c    ****   /* USER CODE BEGIN TIM4_Init 1 */
 792:Src/main.c    **** 
 793:Src/main.c    ****   /* USER CODE END TIM4_Init 1 */
 794:Src/main.c    ****   htim4.Instance = TIM4;
 795:Src/main.c    ****   htim4.Init.Prescaler = 8;
 796:Src/main.c    ****   htim4.Init.CounterMode = TIM_COUNTERMODE_UP;
 797:Src/main.c    ****   htim4.Init.Period = 5000;
 798:Src/main.c    ****   htim4.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 799:Src/main.c    ****   htim4.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 800:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim4) != HAL_OK)
 801:Src/main.c    ****   {
 802:Src/main.c    ****     Error_Handler();
 803:Src/main.c    ****   }
 804:Src/main.c    ****   sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
 805:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim4, &sClockSourceConfig) != HAL_OK)
 806:Src/main.c    ****   {
 807:Src/main.c    ****     Error_Handler();
 808:Src/main.c    ****   }
 809:Src/main.c    ****   sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;
 810:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 811:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim4, &sMasterConfig) != HAL_OK)
 812:Src/main.c    ****   {
 813:Src/main.c    ****     Error_Handler();
 814:Src/main.c    ****   }
 815:Src/main.c    ****   /* USER CODE BEGIN TIM4_Init 2 */
 816:Src/main.c    **** 
 817:Src/main.c    ****   /* USER CODE END TIM4_Init 2 */
 818:Src/main.c    **** 
 819:Src/main.c    **** }
 820:Src/main.c    **** 
 821:Src/main.c    **** /**
 822:Src/main.c    ****   * @brief USART1 Initialization Function
 823:Src/main.c    ****   * @param None
 824:Src/main.c    ****   * @retval None
 825:Src/main.c    ****   */
 826:Src/main.c    **** static void MX_USART1_UART_Init(void)
 827:Src/main.c    **** {
 828:Src/main.c    **** 
 829:Src/main.c    ****   /* USER CODE BEGIN USART1_Init 0 */
 830:Src/main.c    **** 
 831:Src/main.c    ****   /* USER CODE END USART1_Init 0 */
 832:Src/main.c    **** 
ARM GAS  /tmp/ccDrtRJY.s 			page 16


 833:Src/main.c    ****   /* USER CODE BEGIN USART1_Init 1 */
 834:Src/main.c    **** 
 835:Src/main.c    ****   /* USER CODE END USART1_Init 1 */
 836:Src/main.c    ****   huart1.Instance = USART1;
 837:Src/main.c    ****   huart1.Init.BaudRate = 115200;
 838:Src/main.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 839:Src/main.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 840:Src/main.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 841:Src/main.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 842:Src/main.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 843:Src/main.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 844:Src/main.c    ****   if (HAL_MultiProcessor_Init(&huart1, 0, UART_WAKEUPMETHOD_IDLELINE) != HAL_OK)
 845:Src/main.c    ****   {
 846:Src/main.c    ****     Error_Handler();
 847:Src/main.c    ****   }
 848:Src/main.c    ****   /* USER CODE BEGIN USART1_Init 2 */
 849:Src/main.c    **** 
 850:Src/main.c    ****   /* USER CODE END USART1_Init 2 */
 851:Src/main.c    **** 
 852:Src/main.c    **** }
 853:Src/main.c    **** 
 854:Src/main.c    **** /**
 855:Src/main.c    ****   * @brief GPIO Initialization Function
 856:Src/main.c    ****   * @param None
 857:Src/main.c    ****   * @retval None
 858:Src/main.c    ****   */
 859:Src/main.c    **** static void MX_GPIO_Init(void)
 860:Src/main.c    **** {
  25              		.loc 1 860 0
  26              		.cfi_startproc
  27              		@ args = 0, pretend = 0, frame = 24
  28              		@ frame_needed = 0, uses_anonymous_args = 0
  29 0000 30B5     		push	{r4, r5, lr}
  30              	.LCFI0:
  31              		.cfi_def_cfa_offset 12
  32              		.cfi_offset 4, -12
  33              		.cfi_offset 5, -8
  34              		.cfi_offset 14, -4
  35 0002 87B0     		sub	sp, sp, #28
  36              	.LCFI1:
  37              		.cfi_def_cfa_offset 40
 861:Src/main.c    ****   GPIO_InitTypeDef GPIO_InitStruct = {0};
  38              		.loc 1 861 0
  39 0004 0024     		movs	r4, #0
  40 0006 0294     		str	r4, [sp, #8]
  41 0008 0394     		str	r4, [sp, #12]
  42 000a 0494     		str	r4, [sp, #16]
  43 000c 0594     		str	r4, [sp, #20]
  44              	.LBB2:
 862:Src/main.c    **** 
 863:Src/main.c    ****   /* GPIO Ports Clock Enable */
 864:Src/main.c    ****   __HAL_RCC_GPIOA_CLK_ENABLE();
  45              		.loc 1 864 0
  46 000e 134B     		ldr	r3, .L3
  47 0010 9A69     		ldr	r2, [r3, #24]
  48 0012 42F00402 		orr	r2, r2, #4
  49 0016 9A61     		str	r2, [r3, #24]
ARM GAS  /tmp/ccDrtRJY.s 			page 17


  50 0018 9A69     		ldr	r2, [r3, #24]
  51 001a 02F00402 		and	r2, r2, #4
  52 001e 0092     		str	r2, [sp]
  53 0020 009A     		ldr	r2, [sp]
  54              	.LBE2:
  55              	.LBB3:
 865:Src/main.c    ****   __HAL_RCC_GPIOB_CLK_ENABLE();
  56              		.loc 1 865 0
  57 0022 9A69     		ldr	r2, [r3, #24]
  58 0024 42F00802 		orr	r2, r2, #8
  59 0028 9A61     		str	r2, [r3, #24]
  60 002a 9B69     		ldr	r3, [r3, #24]
  61 002c 03F00803 		and	r3, r3, #8
  62 0030 0193     		str	r3, [sp, #4]
  63 0032 019B     		ldr	r3, [sp, #4]
  64              	.LBE3:
 866:Src/main.c    **** 
 867:Src/main.c    ****   /*Configure GPIO pin Output Level */
 868:Src/main.c    ****   HAL_GPIO_WritePin(GPIOA, UPDATE_LED_Pin|ERROR_LED_Pin, GPIO_PIN_RESET);
  65              		.loc 1 868 0
  66 0034 0A4D     		ldr	r5, .L3+4
  67 0036 2246     		mov	r2, r4
  68 0038 0321     		movs	r1, #3
  69 003a 2846     		mov	r0, r5
  70 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
  71              	.LVL0:
 869:Src/main.c    **** 
 870:Src/main.c    ****   /*Configure GPIO pins : UPDATE_LED_Pin ERROR_LED_Pin */
 871:Src/main.c    ****   GPIO_InitStruct.Pin = UPDATE_LED_Pin|ERROR_LED_Pin;
  72              		.loc 1 871 0
  73 0040 0323     		movs	r3, #3
  74 0042 0293     		str	r3, [sp, #8]
 872:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  75              		.loc 1 872 0
  76 0044 0123     		movs	r3, #1
  77 0046 0393     		str	r3, [sp, #12]
 873:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
  78              		.loc 1 873 0
  79 0048 0494     		str	r4, [sp, #16]
 874:Src/main.c    ****   GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  80              		.loc 1 874 0
  81 004a 0223     		movs	r3, #2
  82 004c 0593     		str	r3, [sp, #20]
 875:Src/main.c    ****   HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);
  83              		.loc 1 875 0
  84 004e 02A9     		add	r1, sp, #8
  85 0050 2846     		mov	r0, r5
  86 0052 FFF7FEFF 		bl	HAL_GPIO_Init
  87              	.LVL1:
 876:Src/main.c    **** 
 877:Src/main.c    **** }
  88              		.loc 1 877 0
  89 0056 07B0     		add	sp, sp, #28
  90              	.LCFI2:
  91              		.cfi_def_cfa_offset 12
  92              		@ sp needed
  93 0058 30BD     		pop	{r4, r5, pc}
ARM GAS  /tmp/ccDrtRJY.s 			page 18


  94              	.L4:
  95 005a 00BF     		.align	2
  96              	.L3:
  97 005c 00100240 		.word	1073876992
  98 0060 00080140 		.word	1073809408
  99              		.cfi_endproc
 100              	.LFE270:
 102              		.section	.text.error_alert,"ax",%progbits
 103              		.align	1
 104              		.global	error_alert
 105              		.syntax unified
 106              		.thumb
 107              		.thumb_func
 108              		.fpu softvfp
 110              	error_alert:
 111              	.LFB243:
 117:Src/main.c    ****     char str[100];
 112              		.loc 1 117 0
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 104
 115              		@ frame_needed = 0, uses_anonymous_args = 0
 116              	.LVL2:
 117 0000 30B5     		push	{r4, r5, lr}
 118              	.LCFI3:
 119              		.cfi_def_cfa_offset 12
 120              		.cfi_offset 4, -12
 121              		.cfi_offset 5, -8
 122              		.cfi_offset 14, -4
 123 0002 9BB0     		sub	sp, sp, #108
 124              	.LCFI4:
 125              		.cfi_def_cfa_offset 120
 126 0004 0546     		mov	r5, r0
 119:Src/main.c    ****     HAL_NVIC_DisableIRQ(TIM3_IRQn);
 127              		.loc 1 119 0
 128 0006 1C20     		movs	r0, #28
 129              	.LVL3:
 130 0008 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 131              	.LVL4:
 120:Src/main.c    **** 
 132              		.loc 1 120 0
 133 000c 1D20     		movs	r0, #29
 134 000e FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 135              	.LVL5:
 122:Src/main.c    ****     
 136              		.loc 1 122 0
 137 0012 104C     		ldr	r4, .L7
 138 0014 0122     		movs	r2, #1
 139 0016 0221     		movs	r1, #2
 140 0018 2046     		mov	r0, r4
 141 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 142              	.LVL6:
 124:Src/main.c    ****     HAL_UART_Transmit(&huart1, str, strlen(str), 100);
 143              		.loc 1 124 0
 144 001e 2A46     		mov	r2, r5
 145 0020 0D49     		ldr	r1, .L7+4
 146 0022 01A8     		add	r0, sp, #4
 147 0024 FFF7FEFF 		bl	sprintf
ARM GAS  /tmp/ccDrtRJY.s 			page 19


 148              	.LVL7:
 125:Src/main.c    ****     
 149              		.loc 1 125 0
 150 0028 01A8     		add	r0, sp, #4
 151 002a FFF7FEFF 		bl	strlen
 152              	.LVL8:
 153 002e 6423     		movs	r3, #100
 154 0030 82B2     		uxth	r2, r0
 155 0032 01A9     		add	r1, sp, #4
 156 0034 0948     		ldr	r0, .L7+8
 157 0036 FFF7FEFF 		bl	HAL_UART_Transmit
 158              	.LVL9:
 127:Src/main.c    **** 
 159              		.loc 1 127 0
 160 003a 4FF4FA70 		mov	r0, #500
 161 003e FFF7FEFF 		bl	HAL_Delay
 162              	.LVL10:
 129:Src/main.c    ****     
 163              		.loc 1 129 0
 164 0042 0022     		movs	r2, #0
 165 0044 0221     		movs	r1, #2
 166 0046 2046     		mov	r0, r4
 167 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 168              	.LVL11:
 131:Src/main.c    **** }
 169              		.loc 1 131 0
 170 004c FFF7FEFF 		bl	HAL_NVIC_SystemReset
 171              	.LVL12:
 132:Src/main.c    **** 
 172              		.loc 1 132 0
 173 0050 1BB0     		add	sp, sp, #108
 174              	.LCFI5:
 175              		.cfi_def_cfa_offset 12
 176              		@ sp needed
 177 0052 30BD     		pop	{r4, r5, pc}
 178              	.LVL13:
 179              	.L8:
 180              		.align	2
 181              	.L7:
 182 0054 00080140 		.word	1073809408
 183 0058 00000000 		.word	.LC0
 184 005c 00000000 		.word	huart1
 185              		.cfi_endproc
 186              	.LFE243:
 188              		.section	.text.init_servomotors,"ax",%progbits
 189              		.align	1
 190              		.global	init_servomotors
 191              		.syntax unified
 192              		.thumb
 193              		.thumb_func
 194              		.fpu softvfp
 196              	init_servomotors:
 197              	.LFB244:
 136:Src/main.c    ****     servo_status_t r;
 198              		.loc 1 136 0
 199              		.cfi_startproc
 200              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccDrtRJY.s 			page 20


 201              		@ frame_needed = 0, uses_anonymous_args = 0
 202 0000 08B5     		push	{r3, lr}
 203              	.LCFI6:
 204              		.cfi_def_cfa_offset 8
 205              		.cfi_offset 3, -8
 206              		.cfi_offset 14, -4
 139:Src/main.c    ****     if(r != SERVO_STATUS_OK) error_alert("Cannot init servo_roll");
 207              		.loc 1 139 0
 208 0002 0022     		movs	r2, #0
 209 0004 0D49     		ldr	r1, .L15
 210 0006 0E48     		ldr	r0, .L15+4
 211 0008 FFF7FEFF 		bl	servo_init
 212              	.LVL14:
 140:Src/main.c    **** 
 213              		.loc 1 140 0
 214 000c 70B9     		cbnz	r0, .L13
 215              	.LVL15:
 216              	.L10:
 142:Src/main.c    ****     if(r != SERVO_STATUS_OK) error_alert("Cannot init servo_pitch");
 217              		.loc 1 142 0
 218 000e 0422     		movs	r2, #4
 219 0010 0A49     		ldr	r1, .L15
 220 0012 0C48     		ldr	r0, .L15+8
 221 0014 FFF7FEFF 		bl	servo_init
 222              	.LVL16:
 143:Src/main.c    **** 
 223              		.loc 1 143 0
 224 0018 60B9     		cbnz	r0, .L14
 225              	.LVL17:
 226              	.L11:
 145:Src/main.c    ****     servo_set_offset(&servo_pitch, 60);
 227              		.loc 1 145 0
 228 001a 0B49     		ldr	r1, .L15+12
 229 001c 0848     		ldr	r0, .L15+4
 230 001e FFF7FEFF 		bl	servo_set_offset
 231              	.LVL18:
 146:Src/main.c    **** }
 232              		.loc 1 146 0
 233 0022 0A49     		ldr	r1, .L15+16
 234 0024 0748     		ldr	r0, .L15+8
 235 0026 FFF7FEFF 		bl	servo_set_offset
 236              	.LVL19:
 237 002a 08BD     		pop	{r3, pc}
 238              	.LVL20:
 239              	.L13:
 140:Src/main.c    **** 
 240              		.loc 1 140 0 discriminator 1
 241 002c 0848     		ldr	r0, .L15+20
 242              	.LVL21:
 243 002e FFF7FEFF 		bl	error_alert
 244              	.LVL22:
 245 0032 ECE7     		b	.L10
 246              	.LVL23:
 247              	.L14:
 143:Src/main.c    **** 
 248              		.loc 1 143 0 discriminator 1
 249 0034 0748     		ldr	r0, .L15+24
ARM GAS  /tmp/ccDrtRJY.s 			page 21


 250              	.LVL24:
 251 0036 FFF7FEFF 		bl	error_alert
 252              	.LVL25:
 253 003a EEE7     		b	.L11
 254              	.L16:
 255              		.align	2
 256              	.L15:
 257 003c 00000000 		.word	htim3
 258 0040 00000000 		.word	servo_roll
 259 0044 00000000 		.word	servo_pitch
 260 0048 0000B442 		.word	1119092736
 261 004c 00007042 		.word	1114636288
 262 0050 00000000 		.word	.LC1
 263 0054 18000000 		.word	.LC2
 264              		.cfi_endproc
 265              	.LFE244:
 267              		.section	.text.init_servomotors_motion,"ax",%progbits
 268              		.align	1
 269              		.global	init_servomotors_motion
 270              		.syntax unified
 271              		.thumb
 272              		.thumb_func
 273              		.fpu softvfp
 275              	init_servomotors_motion:
 276              	.LFB245:
 150:Src/main.c    ****     HAL_TIM_Base_Start_IT(&htim3);
 277              		.loc 1 150 0
 278              		.cfi_startproc
 279              		@ args = 0, pretend = 0, frame = 0
 280              		@ frame_needed = 0, uses_anonymous_args = 0
 281 0000 08B5     		push	{r3, lr}
 282              	.LCFI7:
 283              		.cfi_def_cfa_offset 8
 284              		.cfi_offset 3, -8
 285              		.cfi_offset 14, -4
 151:Src/main.c    **** }
 286              		.loc 1 151 0
 287 0002 0248     		ldr	r0, .L19
 288 0004 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 289              	.LVL26:
 290 0008 08BD     		pop	{r3, pc}
 291              	.L20:
 292 000a 00BF     		.align	2
 293              	.L19:
 294 000c 00000000 		.word	htim3
 295              		.cfi_endproc
 296              	.LFE245:
 298              		.section	.text.servo_update,"ax",%progbits
 299              		.align	1
 300              		.global	servo_update
 301              		.syntax unified
 302              		.thumb
 303              		.thumb_func
 304              		.fpu softvfp
 306              	servo_update:
 307              	.LFB246:
 155:Src/main.c    ****     servo_set_position(&servo_roll, roll_compensation);
ARM GAS  /tmp/ccDrtRJY.s 			page 22


 308              		.loc 1 155 0
 309              		.cfi_startproc
 310              		@ args = 0, pretend = 0, frame = 0
 311              		@ frame_needed = 0, uses_anonymous_args = 0
 312 0000 08B5     		push	{r3, lr}
 313              	.LCFI8:
 314              		.cfi_def_cfa_offset 8
 315              		.cfi_offset 3, -8
 316              		.cfi_offset 14, -4
 156:Src/main.c    ****     servo_set_position(&servo_pitch, pitch_compensation);
 317              		.loc 1 156 0
 318 0002 054B     		ldr	r3, .L23
 319 0004 1968     		ldr	r1, [r3]	@ float
 320 0006 0548     		ldr	r0, .L23+4
 321 0008 FFF7FEFF 		bl	servo_set_position
 322              	.LVL27:
 157:Src/main.c    **** }
 323              		.loc 1 157 0
 324 000c 044B     		ldr	r3, .L23+8
 325 000e 1968     		ldr	r1, [r3]	@ float
 326 0010 0448     		ldr	r0, .L23+12
 327 0012 FFF7FEFF 		bl	servo_set_position
 328              	.LVL28:
 329 0016 08BD     		pop	{r3, pc}
 330              	.L24:
 331              		.align	2
 332              	.L23:
 333 0018 00000000 		.word	roll_compensation
 334 001c 00000000 		.word	servo_roll
 335 0020 00000000 		.word	pitch_compensation
 336 0024 00000000 		.word	servo_pitch
 337              		.cfi_endproc
 338              	.LFE246:
 340              		.section	.text.test_sensor,"ax",%progbits
 341              		.align	1
 342              		.global	test_sensor
 343              		.syntax unified
 344              		.thumb
 345              		.thumb_func
 346              		.fpu softvfp
 348              	test_sensor:
 349              	.LFB248:
 189:Src/main.c    ****     uint8_t temp;
 350              		.loc 1 189 0
 351              		.cfi_startproc
 352              		@ args = 0, pretend = 0, frame = 8
 353              		@ frame_needed = 0, uses_anonymous_args = 0
 354 0000 00B5     		push	{lr}
 355              	.LCFI9:
 356              		.cfi_def_cfa_offset 4
 357              		.cfi_offset 14, -4
 358 0002 85B0     		sub	sp, sp, #20
 359              	.LCFI10:
 360              		.cfi_def_cfa_offset 24
 191:Src/main.c    ****     SD_MPU6050_Result r;
 361              		.loc 1 191 0
 362 0004 04AA     		add	r2, sp, #16
ARM GAS  /tmp/ccDrtRJY.s 			page 23


 363 0006 7523     		movs	r3, #117
 364 0008 02F8023D 		strb	r3, [r2, #-2]!
 197:Src/main.c    **** 		{
 365              		.loc 1 197 0
 366 000c 4FF47A73 		mov	r3, #1000
 367 0010 0093     		str	r3, [sp]
 368 0012 0123     		movs	r3, #1
 369 0014 D021     		movs	r1, #208
 370 0016 1048     		ldr	r0, .L32
 371 0018 FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 372              	.LVL29:
 373 001c A0B9     		cbnz	r0, .L30
 374              	.L26:
 203:Src/main.c    **** 		{
 375              		.loc 1 203 0
 376 001e 4FF47A73 		mov	r3, #1000
 377 0022 0093     		str	r3, [sp]
 378 0024 0123     		movs	r3, #1
 379 0026 0DF10F02 		add	r2, sp, #15
 380 002a D021     		movs	r1, #208
 381 002c 0A48     		ldr	r0, .L32
 382 002e FFF7FEFF 		bl	HAL_I2C_Master_Receive
 383              	.LVL30:
 384 0032 68B9     		cbnz	r0, .L31
 385              	.L27:
 209:Src/main.c    **** 		{
 386              		.loc 1 209 0
 387 0034 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 388 0038 682B     		cmp	r3, #104
 389 003a 02D0     		beq	.L25
 211:Src/main.c    **** 		}
 390              		.loc 1 211 0
 391 003c 0748     		ldr	r0, .L32+4
 392 003e FFF7FEFF 		bl	error_alert
 393              	.LVL31:
 394              	.L25:
 214:Src/main.c    **** 
 395              		.loc 1 214 0
 396 0042 05B0     		add	sp, sp, #20
 397              	.LCFI11:
 398              		.cfi_remember_state
 399              		.cfi_def_cfa_offset 4
 400              		@ sp needed
 401 0044 5DF804FB 		ldr	pc, [sp], #4
 402              	.L30:
 403              	.LCFI12:
 404              		.cfi_restore_state
 199:Src/main.c    **** 		}
 405              		.loc 1 199 0
 406 0048 0448     		ldr	r0, .L32+4
 407 004a FFF7FEFF 		bl	error_alert
 408              	.LVL32:
 409 004e E6E7     		b	.L26
 410              	.L31:
 205:Src/main.c    **** 		}
 411              		.loc 1 205 0
 412 0050 0248     		ldr	r0, .L32+4
ARM GAS  /tmp/ccDrtRJY.s 			page 24


 413 0052 FFF7FEFF 		bl	error_alert
 414              	.LVL33:
 415 0056 EDE7     		b	.L27
 416              	.L33:
 417              		.align	2
 418              	.L32:
 419 0058 00000000 		.word	hi2c2
 420 005c 00000000 		.word	.LC3
 421              		.cfi_endproc
 422              	.LFE248:
 424              		.global	__aeabi_i2d
 425              		.global	__aeabi_ddiv
 426              		.global	__aeabi_dmul
 427              		.global	__aeabi_d2f
 428              		.global	__aeabi_fmul
 429              		.section	.text.sensor_calc_position,"ax",%progbits
 430              		.align	1
 431              		.global	sensor_calc_position
 432              		.syntax unified
 433              		.thumb
 434              		.thumb_func
 435              		.fpu softvfp
 437              	sensor_calc_position:
 438              	.LFB250:
 242:Src/main.c    ****     *pitch = 180 * atan (position_sensor.Accelerometer_X/sqrt(SQUARE(position_sensor.Accelerometer_
 439              		.loc 1 242 0
 440              		.cfi_startproc
 441              		@ args = 0, pretend = 0, frame = 0
 442              		@ frame_needed = 0, uses_anonymous_args = 0
 443              	.LVL34:
 444 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 445              	.LCFI13:
 446              		.cfi_def_cfa_offset 32
 447              		.cfi_offset 3, -32
 448              		.cfi_offset 4, -28
 449              		.cfi_offset 5, -24
 450              		.cfi_offset 6, -20
 451              		.cfi_offset 7, -16
 452              		.cfi_offset 8, -12
 453              		.cfi_offset 9, -8
 454              		.cfi_offset 14, -4
 455 0004 0646     		mov	r6, r0
 456 0006 0D46     		mov	r5, r1
 243:Src/main.c    ****     *roll = 180 * atan (position_sensor.Accelerometer_Y/sqrt(SQUARE(position_sensor.Accelerometer_X
 457              		.loc 1 243 0
 458 0008 2D4C     		ldr	r4, .L36+8
 459 000a B4F90C70 		ldrsh	r7, [r4, #12]
 460 000e B4F90E00 		ldrsh	r0, [r4, #14]
 461              	.LVL35:
 462 0012 B4F91030 		ldrsh	r3, [r4, #16]
 463 0016 03FB03F3 		mul	r3, r3, r3
 464 001a 00FB0030 		mla	r0, r0, r0, r3
 465 001e FFF7FEFF 		bl	__aeabi_i2d
 466              	.LVL36:
 467 0022 FFF7FEFF 		bl	sqrt
 468              	.LVL37:
 469 0026 8046     		mov	r8, r0
ARM GAS  /tmp/ccDrtRJY.s 			page 25


 470 0028 8946     		mov	r9, r1
 471 002a 3846     		mov	r0, r7
 472 002c FFF7FEFF 		bl	__aeabi_i2d
 473              	.LVL38:
 474 0030 4246     		mov	r2, r8
 475 0032 4B46     		mov	r3, r9
 476 0034 FFF7FEFF 		bl	__aeabi_ddiv
 477              	.LVL39:
 478 0038 FFF7FEFF 		bl	atan
 479              	.LVL40:
 480 003c 0022     		movs	r2, #0
 481 003e 214B     		ldr	r3, .L36+12
 482 0040 FFF7FEFF 		bl	__aeabi_dmul
 483              	.LVL41:
 484 0044 1CA3     		adr	r3, .L36
 485 0046 D3E90023 		ldrd	r2, [r3]
 486 004a FFF7FEFF 		bl	__aeabi_ddiv
 487              	.LVL42:
 488 004e FFF7FEFF 		bl	__aeabi_d2f
 489              	.LVL43:
 490 0052 3060     		str	r0, [r6]	@ float
 244:Src/main.c    ****     *pitch *= sensor_factor;
 491              		.loc 1 244 0
 492 0054 B4F90E70 		ldrsh	r7, [r4, #14]
 493 0058 B4F90C00 		ldrsh	r0, [r4, #12]
 494 005c B4F91030 		ldrsh	r3, [r4, #16]
 495 0060 03FB03F3 		mul	r3, r3, r3
 496 0064 00FB0030 		mla	r0, r0, r0, r3
 497 0068 FFF7FEFF 		bl	__aeabi_i2d
 498              	.LVL44:
 499 006c FFF7FEFF 		bl	sqrt
 500              	.LVL45:
 501 0070 8046     		mov	r8, r0
 502 0072 8946     		mov	r9, r1
 503 0074 3846     		mov	r0, r7
 504 0076 FFF7FEFF 		bl	__aeabi_i2d
 505              	.LVL46:
 506 007a 4246     		mov	r2, r8
 507 007c 4B46     		mov	r3, r9
 508 007e FFF7FEFF 		bl	__aeabi_ddiv
 509              	.LVL47:
 510 0082 FFF7FEFF 		bl	atan
 511              	.LVL48:
 512 0086 0022     		movs	r2, #0
 513 0088 0E4B     		ldr	r3, .L36+12
 514 008a FFF7FEFF 		bl	__aeabi_dmul
 515              	.LVL49:
 516 008e 0AA3     		adr	r3, .L36
 517 0090 D3E90023 		ldrd	r2, [r3]
 518 0094 FFF7FEFF 		bl	__aeabi_ddiv
 519              	.LVL50:
 520 0098 FFF7FEFF 		bl	__aeabi_d2f
 521              	.LVL51:
 522 009c 2860     		str	r0, [r5]	@ float
 245:Src/main.c    ****     *roll *= sensor_factor;
 523              		.loc 1 245 0
 524 009e 0A4C     		ldr	r4, .L36+16
ARM GAS  /tmp/ccDrtRJY.s 			page 26


 525 00a0 2168     		ldr	r1, [r4]	@ float
 526 00a2 3068     		ldr	r0, [r6]	@ float
 527 00a4 FFF7FEFF 		bl	__aeabi_fmul
 528              	.LVL52:
 529 00a8 3060     		str	r0, [r6]	@ float
 246:Src/main.c    **** }
 530              		.loc 1 246 0
 531 00aa 2168     		ldr	r1, [r4]	@ float
 532 00ac 2868     		ldr	r0, [r5]	@ float
 533 00ae FFF7FEFF 		bl	__aeabi_fmul
 534              	.LVL53:
 535 00b2 2860     		str	r0, [r5]	@ float
 536 00b4 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 537              	.LVL54:
 538              	.L37:
 539              		.align	3
 540              	.L36:
 541 00b8 182D4454 		.word	1413754136
 542 00bc FB210940 		.word	1074340347
 543 00c0 00000000 		.word	position_sensor
 544 00c4 00806640 		.word	1080459264
 545 00c8 00000000 		.word	sensor_factor
 546              		.cfi_endproc
 547              	.LFE250:
 549              		.section	.text.init_position_sensor,"ax",%progbits
 550              		.align	1
 551              		.global	init_position_sensor
 552              		.syntax unified
 553              		.thumb
 554              		.thumb_func
 555              		.fpu softvfp
 557              	init_position_sensor:
 558              	.LFB247:
 162:Src/main.c    ****     sensor_roll = 0;
 559              		.loc 1 162 0
 560              		.cfi_startproc
 561              		@ args = 0, pretend = 0, frame = 0
 562              		@ frame_needed = 0, uses_anonymous_args = 0
 563 0000 00B5     		push	{lr}
 564              	.LCFI14:
 565              		.cfi_def_cfa_offset 4
 566              		.cfi_offset 14, -4
 567 0002 83B0     		sub	sp, sp, #12
 568              	.LCFI15:
 569              		.cfi_def_cfa_offset 16
 163:Src/main.c    ****     sensor_pitch = 0;
 570              		.loc 1 163 0
 571 0004 0023     		movs	r3, #0
 572 0006 104A     		ldr	r2, .L42
 573 0008 1360     		str	r3, [r2]	@ float
 164:Src/main.c    ****     sensor_factor = DEFAULT_FACTOR;
 574              		.loc 1 164 0
 575 000a 104A     		ldr	r2, .L42+4
 576 000c 1360     		str	r3, [r2]	@ float
 165:Src/main.c    **** 
 577              		.loc 1 165 0
 578 000e 104A     		ldr	r2, .L42+8
ARM GAS  /tmp/ccDrtRJY.s 			page 27


 579 0010 104B     		ldr	r3, .L42+12
 580 0012 1A60     		str	r2, [r3]	@ float
 167:Src/main.c    ****     
 581              		.loc 1 167 0
 582 0014 4FF4FA70 		mov	r0, #500
 583 0018 FFF7FEFF 		bl	HAL_Delay
 584              	.LVL55:
 170:Src/main.c    ****     
 585              		.loc 1 170 0
 586 001c 0022     		movs	r2, #0
 587 001e 0092     		str	r2, [sp]
 588 0020 1346     		mov	r3, r2
 589 0022 0D49     		ldr	r1, .L42+16
 590 0024 0D48     		ldr	r0, .L42+20
 591 0026 FFF7FEFF 		bl	SD_MPU6050_Init
 592              	.LVL56:
 172:Src/main.c    ****     {
 593              		.loc 1 172 0
 594 002a 48B9     		cbnz	r0, .L41
 595              	.LVL57:
 596              	.L39:
 177:Src/main.c    ****     HAL_TIM_Base_Start_IT(&htim4);
 597              		.loc 1 177 0
 598 002c 0649     		ldr	r1, .L42
 599 002e 0748     		ldr	r0, .L42+4
 600 0030 FFF7FEFF 		bl	sensor_calc_position
 601              	.LVL58:
 178:Src/main.c    **** }
 602              		.loc 1 178 0
 603 0034 0A48     		ldr	r0, .L42+24
 604 0036 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 605              	.LVL59:
 179:Src/main.c    **** 
 606              		.loc 1 179 0
 607 003a 03B0     		add	sp, sp, #12
 608              	.LCFI16:
 609              		.cfi_remember_state
 610              		.cfi_def_cfa_offset 4
 611              		@ sp needed
 612 003c 5DF804FB 		ldr	pc, [sp], #4
 613              	.LVL60:
 614              	.L41:
 615              	.LCFI17:
 616              		.cfi_restore_state
 174:Src/main.c    ****     }
 617              		.loc 1 174 0
 618 0040 0848     		ldr	r0, .L42+28
 619              	.LVL61:
 620 0042 FFF7FEFF 		bl	error_alert
 621              	.LVL62:
 622 0046 F1E7     		b	.L39
 623              	.L43:
 624              		.align	2
 625              	.L42:
 626 0048 00000000 		.word	sensor_roll
 627 004c 00000000 		.word	sensor_pitch
 628 0050 3333B33F 		.word	1068708659
ARM GAS  /tmp/ccDrtRJY.s 			page 28


 629 0054 00000000 		.word	sensor_factor
 630 0058 00000000 		.word	position_sensor
 631 005c 00000000 		.word	hi2c2
 632 0060 00000000 		.word	htim4
 633 0064 00000000 		.word	.LC4
 634              		.cfi_endproc
 635              	.LFE247:
 637              		.section	.text.update_position_sensor,"ax",%progbits
 638              		.align	1
 639              		.global	update_position_sensor
 640              		.syntax unified
 641              		.thumb
 642              		.thumb_func
 643              		.fpu softvfp
 645              	update_position_sensor:
 646              	.LFB249:
 221:Src/main.c    ****     HAL_GPIO_WritePin(UPDATE_LED_GPIO_Port, UPDATE_LED_Pin, GPIO_PIN_SET);
 647              		.loc 1 221 0
 648              		.cfi_startproc
 649              		@ args = 0, pretend = 0, frame = 0
 650              		@ frame_needed = 0, uses_anonymous_args = 0
 651 0000 38B5     		push	{r3, r4, r5, lr}
 652              	.LCFI18:
 653              		.cfi_def_cfa_offset 16
 654              		.cfi_offset 3, -16
 655              		.cfi_offset 4, -12
 656              		.cfi_offset 5, -8
 657              		.cfi_offset 14, -4
 222:Src/main.c    ****     
 658              		.loc 1 222 0
 659 0002 0122     		movs	r2, #1
 660 0004 1146     		mov	r1, r2
 661 0006 1448     		ldr	r0, .L48
 662 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 663              	.LVL63:
 224:Src/main.c    ****     SD_MPU6050_Result r;
 664              		.loc 1 224 0
 665 000c FFF7FEFF 		bl	test_sensor
 666              	.LVL64:
 226:Src/main.c    ****     if(r != SD_MPU6050_Result_Ok)
 667              		.loc 1 226 0
 668 0010 1249     		ldr	r1, .L48+4
 669 0012 1348     		ldr	r0, .L48+8
 670 0014 FFF7FEFF 		bl	SD_MPU6050_ReadAccelerometer
 671              	.LVL65:
 227:Src/main.c    ****     {
 672              		.loc 1 227 0
 673 0018 C8B9     		cbnz	r0, .L47
 674              	.LVL66:
 675              	.L45:
 232:Src/main.c    ****     roll_compensation = maf_filter(&roll_filter, sensor_roll);
 676              		.loc 1 232 0
 677 001a 124D     		ldr	r5, .L48+12
 678 001c 124C     		ldr	r4, .L48+16
 679 001e 2946     		mov	r1, r5
 680 0020 2046     		mov	r0, r4
 681 0022 FFF7FEFF 		bl	sensor_calc_position
ARM GAS  /tmp/ccDrtRJY.s 			page 29


 682              	.LVL67:
 233:Src/main.c    ****     pitch_compensation = -maf_filter(&pitch_filter, sensor_pitch);
 683              		.loc 1 233 0
 684 0026 2968     		ldr	r1, [r5]	@ float
 685 0028 1048     		ldr	r0, .L48+20
 686 002a FFF7FEFF 		bl	maf_filter
 687              	.LVL68:
 688 002e 104B     		ldr	r3, .L48+24
 689 0030 1860     		str	r0, [r3]	@ float
 234:Src/main.c    **** 
 690              		.loc 1 234 0
 691 0032 2168     		ldr	r1, [r4]	@ float
 692 0034 0F48     		ldr	r0, .L48+28
 693 0036 FFF7FEFF 		bl	maf_filter
 694              	.LVL69:
 695 003a 00F10040 		add	r0, r0, #-2147483648
 696 003e 0E4B     		ldr	r3, .L48+32
 697 0040 1860     		str	r0, [r3]	@ float
 236:Src/main.c    **** }
 698              		.loc 1 236 0
 699 0042 0022     		movs	r2, #0
 700 0044 0121     		movs	r1, #1
 701 0046 0448     		ldr	r0, .L48
 702 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 703              	.LVL70:
 704 004c 38BD     		pop	{r3, r4, r5, pc}
 705              	.LVL71:
 706              	.L47:
 229:Src/main.c    ****     }
 707              		.loc 1 229 0
 708 004e 0B48     		ldr	r0, .L48+36
 709              	.LVL72:
 710 0050 FFF7FEFF 		bl	error_alert
 711              	.LVL73:
 712 0054 E1E7     		b	.L45
 713              	.L49:
 714 0056 00BF     		.align	2
 715              	.L48:
 716 0058 00080140 		.word	1073809408
 717 005c 00000000 		.word	position_sensor
 718 0060 00000000 		.word	hi2c2
 719 0064 00000000 		.word	sensor_roll
 720 0068 00000000 		.word	sensor_pitch
 721 006c 00000000 		.word	roll_filter
 722 0070 00000000 		.word	roll_compensation
 723 0074 00000000 		.word	pitch_filter
 724 0078 00000000 		.word	pitch_compensation
 725 007c 00000000 		.word	.LC5
 726              		.cfi_endproc
 727              	.LFE249:
 729              		.section	.text.change_smoothing,"ax",%progbits
 730              		.align	1
 731              		.global	change_smoothing
 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
 735              		.fpu softvfp
ARM GAS  /tmp/ccDrtRJY.s 			page 30


 737              	change_smoothing:
 738              	.LFB251:
 256:Src/main.c    ****     HAL_NVIC_DisableIRQ(TIM3_IRQn);
 739              		.loc 1 256 0
 740              		.cfi_startproc
 741              		@ args = 0, pretend = 0, frame = 0
 742              		@ frame_needed = 0, uses_anonymous_args = 0
 743              	.LVL74:
 744 0000 70B5     		push	{r4, r5, r6, lr}
 745              	.LCFI19:
 746              		.cfi_def_cfa_offset 16
 747              		.cfi_offset 4, -16
 748              		.cfi_offset 5, -12
 749              		.cfi_offset 6, -8
 750              		.cfi_offset 14, -4
 751 0002 0546     		mov	r5, r0
 257:Src/main.c    ****     HAL_NVIC_DisableIRQ(TIM4_IRQn);
 752              		.loc 1 257 0
 753 0004 1D20     		movs	r0, #29
 754              	.LVL75:
 755 0006 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 756              	.LVL76:
 258:Src/main.c    ****     
 757              		.loc 1 258 0
 758 000a 1E20     		movs	r0, #30
 759 000c FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 760              	.LVL77:
 260:Src/main.c    ****     servo_set_position(&servo_pitch, 0);
 761              		.loc 1 260 0
 762 0010 0024     		movs	r4, #0
 763 0012 2146     		mov	r1, r4
 764 0014 0F48     		ldr	r0, .L52
 765 0016 FFF7FEFF 		bl	servo_set_position
 766              	.LVL78:
 261:Src/main.c    **** 
 767              		.loc 1 261 0
 768 001a 2146     		mov	r1, r4
 769 001c 0E48     		ldr	r0, .L52+4
 770 001e FFF7FEFF 		bl	servo_set_position
 771              	.LVL79:
 263:Src/main.c    ****     
 772              		.loc 1 263 0
 773 0022 0E4C     		ldr	r4, .L52+8
 774 0024 2560     		str	r5, [r4]
 265:Src/main.c    ****     delete_maf(&pitch_filter);
 775              		.loc 1 265 0
 776 0026 0E4E     		ldr	r6, .L52+12
 777 0028 3046     		mov	r0, r6
 778 002a FFF7FEFF 		bl	delete_maf
 779              	.LVL80:
 266:Src/main.c    **** 
 780              		.loc 1 266 0
 781 002e 0D4D     		ldr	r5, .L52+16
 782              	.LVL81:
 783 0030 2846     		mov	r0, r5
 784 0032 FFF7FEFF 		bl	delete_maf
 785              	.LVL82:
ARM GAS  /tmp/ccDrtRJY.s 			page 31


 268:Src/main.c    ****     init_maf(&pitch_filter, smoothing);
 786              		.loc 1 268 0
 787 0036 2168     		ldr	r1, [r4]
 788 0038 3046     		mov	r0, r6
 789 003a FFF7FEFF 		bl	init_maf
 790              	.LVL83:
 269:Src/main.c    ****     
 791              		.loc 1 269 0
 792 003e 2168     		ldr	r1, [r4]
 793 0040 2846     		mov	r0, r5
 794 0042 FFF7FEFF 		bl	init_maf
 795              	.LVL84:
 271:Src/main.c    ****     HAL_NVIC_EnableIRQ(TIM3_IRQn);
 796              		.loc 1 271 0
 797 0046 1E20     		movs	r0, #30
 798 0048 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 799              	.LVL85:
 272:Src/main.c    **** }
 800              		.loc 1 272 0
 801 004c 1D20     		movs	r0, #29
 802 004e FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 803              	.LVL86:
 804 0052 70BD     		pop	{r4, r5, r6, pc}
 805              	.L53:
 806              		.align	2
 807              	.L52:
 808 0054 00000000 		.word	servo_roll
 809 0058 00000000 		.word	servo_pitch
 810 005c 00000000 		.word	smoothing
 811 0060 00000000 		.word	roll_filter
 812 0064 00000000 		.word	pitch_filter
 813              		.cfi_endproc
 814              	.LFE251:
 816              		.section	.text.init_uart_messaging,"ax",%progbits
 817              		.align	1
 818              		.global	init_uart_messaging
 819              		.syntax unified
 820              		.thumb
 821              		.thumb_func
 822              		.fpu softvfp
 824              	init_uart_messaging:
 825              	.LFB253:
 292:Src/main.c    ****     HAL_TIM_Base_Start_IT(&htim2);
 826              		.loc 1 292 0
 827              		.cfi_startproc
 828              		@ args = 0, pretend = 0, frame = 0
 829              		@ frame_needed = 0, uses_anonymous_args = 0
 830 0000 08B5     		push	{r3, lr}
 831              	.LCFI20:
 832              		.cfi_def_cfa_offset 8
 833              		.cfi_offset 3, -8
 834              		.cfi_offset 14, -4
 293:Src/main.c    **** }
 835              		.loc 1 293 0
 836 0002 0248     		ldr	r0, .L56
 837 0004 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 838              	.LVL87:
ARM GAS  /tmp/ccDrtRJY.s 			page 32


 839 0008 08BD     		pop	{r3, pc}
 840              	.L57:
 841 000a 00BF     		.align	2
 842              	.L56:
 843 000c 00000000 		.word	htim2
 844              		.cfi_endproc
 845              	.LFE253:
 847              		.section	.text.init_system,"ax",%progbits
 848              		.align	1
 849              		.global	init_system
 850              		.syntax unified
 851              		.thumb
 852              		.thumb_func
 853              		.fpu softvfp
 855              	init_system:
 856              	.LFB242:
 104:Src/main.c    ****     smoothing = DEFAULT_SMOOTHING;
 857              		.loc 1 104 0
 858              		.cfi_startproc
 859              		@ args = 0, pretend = 0, frame = 0
 860              		@ frame_needed = 0, uses_anonymous_args = 0
 861 0000 08B5     		push	{r3, lr}
 862              	.LCFI21:
 863              		.cfi_def_cfa_offset 8
 864              		.cfi_offset 3, -8
 865              		.cfi_offset 14, -4
 105:Src/main.c    ****     if(init_maf(&roll_filter, smoothing) == 0) error_alert("Cannot init MAF");
 866              		.loc 1 105 0
 867 0002 1421     		movs	r1, #20
 868 0004 0E4B     		ldr	r3, .L64
 869 0006 1960     		str	r1, [r3]
 106:Src/main.c    ****     if(init_maf(&pitch_filter, smoothing) == 0) error_alert("Cannot init MAF");
 870              		.loc 1 106 0
 871 0008 0E48     		ldr	r0, .L64+4
 872 000a FFF7FEFF 		bl	init_maf
 873              	.LVL88:
 874 000e 70B1     		cbz	r0, .L62
 875              	.L59:
 107:Src/main.c    **** 
 876              		.loc 1 107 0
 877 0010 0B4B     		ldr	r3, .L64
 878 0012 1968     		ldr	r1, [r3]
 879 0014 0C48     		ldr	r0, .L64+8
 880 0016 FFF7FEFF 		bl	init_maf
 881              	.LVL89:
 882 001a 60B1     		cbz	r0, .L63
 883              	.L60:
 109:Src/main.c    ****     init_servomotors();
 884              		.loc 1 109 0
 885 001c FFF7FEFF 		bl	init_position_sensor
 886              	.LVL90:
 110:Src/main.c    ****     init_uart_messaging();
 887              		.loc 1 110 0
 888 0020 FFF7FEFF 		bl	init_servomotors
 889              	.LVL91:
 111:Src/main.c    ****     init_servomotors_motion();
 890              		.loc 1 111 0
ARM GAS  /tmp/ccDrtRJY.s 			page 33


 891 0024 FFF7FEFF 		bl	init_uart_messaging
 892              	.LVL92:
 112:Src/main.c    ****     init_mailbox();
 893              		.loc 1 112 0
 894 0028 FFF7FEFF 		bl	init_servomotors_motion
 895              	.LVL93:
 896 002c 08BD     		pop	{r3, pc}
 897              	.L62:
 106:Src/main.c    ****     if(init_maf(&pitch_filter, smoothing) == 0) error_alert("Cannot init MAF");
 898              		.loc 1 106 0 discriminator 1
 899 002e 0748     		ldr	r0, .L64+12
 900 0030 FFF7FEFF 		bl	error_alert
 901              	.LVL94:
 902 0034 ECE7     		b	.L59
 903              	.L63:
 107:Src/main.c    **** 
 904              		.loc 1 107 0 discriminator 1
 905 0036 0548     		ldr	r0, .L64+12
 906 0038 FFF7FEFF 		bl	error_alert
 907              	.LVL95:
 908 003c EEE7     		b	.L60
 909              	.L65:
 910 003e 00BF     		.align	2
 911              	.L64:
 912 0040 00000000 		.word	smoothing
 913 0044 00000000 		.word	roll_filter
 914 0048 00000000 		.word	pitch_filter
 915 004c 00000000 		.word	.LC6
 916              		.cfi_endproc
 917              	.LFE242:
 919              		.section	.text.send_value_pack,"ax",%progbits
 920              		.align	1
 921              		.global	send_value_pack
 922              		.syntax unified
 923              		.thumb
 924              		.thumb_func
 925              		.fpu softvfp
 927              	send_value_pack:
 928              	.LFB254:
 297:Src/main.c    ****     char value_pack_str[100];
 929              		.loc 1 297 0
 930              		.cfi_startproc
 931              		@ args = 0, pretend = 0, frame = 112
 932              		@ frame_needed = 0, uses_anonymous_args = 0
 933              	.LVL96:
 934 0000 10B5     		push	{r4, lr}
 935              	.LCFI22:
 936              		.cfi_def_cfa_offset 8
 937              		.cfi_offset 4, -8
 938              		.cfi_offset 14, -4
 939 0002 9CB0     		sub	sp, sp, #112
 940              	.LCFI23:
 941              		.cfi_def_cfa_offset 120
 942 0004 0446     		mov	r4, r0
 943 0006 0846     		mov	r0, r1
 944              	.LVL97:
 300:Src/main.c    **** 
ARM GAS  /tmp/ccDrtRJY.s 			page 34


 945              		.loc 1 300 0
 946 0008 6946     		mov	r1, sp
 947              	.LVL98:
 948 000a FFF7FEFF 		bl	float_to_string
 949              	.LVL99:
 302:Src/main.c    ****     {
 950              		.loc 1 302 0
 951 000e 012C     		cmp	r4, #1
 952 0010 06D0     		beq	.L70
 308:Src/main.c    ****     }
 953              		.loc 1 308 0
 954 0012 6A46     		mov	r2, sp
 955 0014 0549     		ldr	r1, .L71
 956 0016 03A8     		add	r0, sp, #12
 957 0018 FFF7FEFF 		bl	sprintf
 958              	.LVL100:
 959              	.L66:
 310:Src/main.c    **** 
 960              		.loc 1 310 0
 961 001c 1CB0     		add	sp, sp, #112
 962              	.LCFI24:
 963              		.cfi_remember_state
 964              		.cfi_def_cfa_offset 8
 965              		@ sp needed
 966 001e 10BD     		pop	{r4, pc}
 967              	.L70:
 968              	.LCFI25:
 969              		.cfi_restore_state
 304:Src/main.c    ****     }
 970              		.loc 1 304 0
 971 0020 6A46     		mov	r2, sp
 972 0022 0349     		ldr	r1, .L71+4
 973 0024 03A8     		add	r0, sp, #12
 974 0026 FFF7FEFF 		bl	sprintf
 975              	.LVL101:
 976 002a F7E7     		b	.L66
 977              	.L72:
 978              		.align	2
 979              	.L71:
 980 002c 34000000 		.word	.LC8
 981 0030 00000000 		.word	.LC7
 982              		.cfi_endproc
 983              	.LFE254:
 985              		.global	__aeabi_f2iz
 986              		.section	.text.send_angle_pack,"ax",%progbits
 987              		.align	1
 988              		.global	send_angle_pack
 989              		.syntax unified
 990              		.thumb
 991              		.thumb_func
 992              		.fpu softvfp
 994              	send_angle_pack:
 995              	.LFB255:
 313:Src/main.c    ****     char angle_pack_str[100];
 996              		.loc 1 313 0
 997              		.cfi_startproc
 998              		@ args = 0, pretend = 0, frame = 104
ARM GAS  /tmp/ccDrtRJY.s 			page 35


 999              		@ frame_needed = 0, uses_anonymous_args = 0
 1000              	.LVL102:
 1001 0000 30B5     		push	{r4, r5, lr}
 1002              	.LCFI26:
 1003              		.cfi_def_cfa_offset 12
 1004              		.cfi_offset 4, -12
 1005              		.cfi_offset 5, -8
 1006              		.cfi_offset 14, -4
 1007 0002 9BB0     		sub	sp, sp, #108
 1008              	.LCFI27:
 1009              		.cfi_def_cfa_offset 120
 1010 0004 0C46     		mov	r4, r1
 317:Src/main.c    ****     {
 1011              		.loc 1 317 0
 1012 0006 0128     		cmp	r0, #1
 1013 0008 17D0     		beq	.L77
 323:Src/main.c    ****     }
 1014              		.loc 1 323 0
 1015 000a 1046     		mov	r0, r2
 1016              	.LVL103:
 1017 000c FFF7FEFF 		bl	__aeabi_f2iz
 1018              	.LVL104:
 1019 0010 0546     		mov	r5, r0
 1020 0012 2046     		mov	r0, r4
 1021 0014 FFF7FEFF 		bl	__aeabi_f2iz
 1022              	.LVL105:
 1023 0018 2B46     		mov	r3, r5
 1024 001a 0246     		mov	r2, r0
 1025 001c 0E49     		ldr	r1, .L78
 1026 001e 01A8     		add	r0, sp, #4
 1027 0020 FFF7FEFF 		bl	sprintf
 1028              	.LVL106:
 1029              	.L75:
 346:Src/main.c    **** }
 1030              		.loc 1 346 0
 1031 0024 01A8     		add	r0, sp, #4
 1032 0026 FFF7FEFF 		bl	strlen
 1033              	.LVL107:
 1034 002a 6423     		movs	r3, #100
 1035 002c 82B2     		uxth	r2, r0
 1036 002e 01A9     		add	r1, sp, #4
 1037 0030 0A48     		ldr	r0, .L78+4
 1038 0032 FFF7FEFF 		bl	HAL_UART_Transmit
 1039              	.LVL108:
 347:Src/main.c    **** 
 1040              		.loc 1 347 0
 1041 0036 1BB0     		add	sp, sp, #108
 1042              	.LCFI28:
 1043              		.cfi_remember_state
 1044              		.cfi_def_cfa_offset 12
 1045              		@ sp needed
 1046 0038 30BD     		pop	{r4, r5, pc}
 1047              	.LVL109:
 1048              	.L77:
 1049              	.LCFI29:
 1050              		.cfi_restore_state
 319:Src/main.c    ****     }
ARM GAS  /tmp/ccDrtRJY.s 			page 36


 1051              		.loc 1 319 0
 1052 003a 1046     		mov	r0, r2
 1053              	.LVL110:
 1054 003c FFF7FEFF 		bl	__aeabi_f2iz
 1055              	.LVL111:
 1056 0040 0546     		mov	r5, r0
 1057 0042 2046     		mov	r0, r4
 1058 0044 FFF7FEFF 		bl	__aeabi_f2iz
 1059              	.LVL112:
 1060 0048 2B46     		mov	r3, r5
 1061 004a 0246     		mov	r2, r0
 1062 004c 0449     		ldr	r1, .L78+8
 1063 004e 01A8     		add	r0, sp, #4
 1064 0050 FFF7FEFF 		bl	sprintf
 1065              	.LVL113:
 1066 0054 E6E7     		b	.L75
 1067              	.L79:
 1068 0056 00BF     		.align	2
 1069              	.L78:
 1070 0058 3C000000 		.word	.LC10
 1071 005c 00000000 		.word	huart1
 1072 0060 00000000 		.word	.LC9
 1073              		.cfi_endproc
 1074              	.LFE255:
 1076              		.section	.text.uart_message_update,"ax",%progbits
 1077              		.align	1
 1078              		.global	uart_message_update
 1079              		.syntax unified
 1080              		.thumb
 1081              		.thumb_func
 1082              		.fpu softvfp
 1084              	uart_message_update:
 1085              	.LFB252:
 282:Src/main.c    ****     send_angle_pack(SENSOR_ANGLE_PACK, sensor_pitch, sensor_roll);
 1086              		.loc 1 282 0
 1087              		.cfi_startproc
 1088              		@ args = 0, pretend = 0, frame = 0
 1089              		@ frame_needed = 0, uses_anonymous_args = 0
 1090 0000 08B5     		push	{r3, lr}
 1091              	.LCFI30:
 1092              		.cfi_def_cfa_offset 8
 1093              		.cfi_offset 3, -8
 1094              		.cfi_offset 14, -4
 283:Src/main.c    ****     send_angle_pack(SERVO_ANGLE_PACK, pitch_compensation, roll_compensation);
 1095              		.loc 1 283 0
 1096 0002 074B     		ldr	r3, .L82
 1097 0004 1A68     		ldr	r2, [r3]	@ float
 1098 0006 074B     		ldr	r3, .L82+4
 1099 0008 1968     		ldr	r1, [r3]	@ float
 1100 000a 0120     		movs	r0, #1
 1101 000c FFF7FEFF 		bl	send_angle_pack
 1102              	.LVL114:
 284:Src/main.c    **** }
 1103              		.loc 1 284 0
 1104 0010 054B     		ldr	r3, .L82+8
 1105 0012 1A68     		ldr	r2, [r3]	@ float
 1106 0014 054B     		ldr	r3, .L82+12
ARM GAS  /tmp/ccDrtRJY.s 			page 37


 1107 0016 1968     		ldr	r1, [r3]	@ float
 1108 0018 0020     		movs	r0, #0
 1109 001a FFF7FEFF 		bl	send_angle_pack
 1110              	.LVL115:
 1111 001e 08BD     		pop	{r3, pc}
 1112              	.L83:
 1113              		.align	2
 1114              	.L82:
 1115 0020 00000000 		.word	sensor_roll
 1116 0024 00000000 		.word	sensor_pitch
 1117 0028 00000000 		.word	roll_compensation
 1118 002c 00000000 		.word	pitch_compensation
 1119              		.cfi_endproc
 1120              	.LFE252:
 1122              		.section	.text.send_echo_pack,"ax",%progbits
 1123              		.align	1
 1124              		.global	send_echo_pack
 1125              		.syntax unified
 1126              		.thumb
 1127              		.thumb_func
 1128              		.fpu softvfp
 1130              	send_echo_pack:
 1131              	.LFB256:
 350:Src/main.c    ****     char echo_pack_str[100];
 1132              		.loc 1 350 0
 1133              		.cfi_startproc
 1134              		@ args = 0, pretend = 0, frame = 104
 1135              		@ frame_needed = 0, uses_anonymous_args = 0
 1136              	.LVL116:
 1137 0000 00B5     		push	{lr}
 1138              	.LCFI31:
 1139              		.cfi_def_cfa_offset 4
 1140              		.cfi_offset 14, -4
 1141 0002 9BB0     		sub	sp, sp, #108
 1142              	.LCFI32:
 1143              		.cfi_def_cfa_offset 112
 352:Src/main.c    ****     HAL_UART_Transmit(&huart1, echo_pack_str, strlen(echo_pack_str), 100);
 1144              		.loc 1 352 0
 1145 0004 0246     		mov	r2, r0
 1146 0006 0849     		ldr	r1, .L86
 1147 0008 01A8     		add	r0, sp, #4
 1148              	.LVL117:
 1149 000a FFF7FEFF 		bl	sprintf
 1150              	.LVL118:
 353:Src/main.c    **** }
 1151              		.loc 1 353 0
 1152 000e 01A8     		add	r0, sp, #4
 1153 0010 FFF7FEFF 		bl	strlen
 1154              	.LVL119:
 1155 0014 6423     		movs	r3, #100
 1156 0016 82B2     		uxth	r2, r0
 1157 0018 01A9     		add	r1, sp, #4
 1158 001a 0448     		ldr	r0, .L86+4
 1159 001c FFF7FEFF 		bl	HAL_UART_Transmit
 1160              	.LVL120:
 354:Src/main.c    **** 
 1161              		.loc 1 354 0
ARM GAS  /tmp/ccDrtRJY.s 			page 38


 1162 0020 1BB0     		add	sp, sp, #108
 1163              	.LCFI33:
 1164              		.cfi_def_cfa_offset 4
 1165              		@ sp needed
 1166 0022 5DF804FB 		ldr	pc, [sp], #4
 1167              	.L87:
 1168 0026 00BF     		.align	2
 1169              	.L86:
 1170 0028 00000000 		.word	.LC11
 1171 002c 00000000 		.word	huart1
 1172              		.cfi_endproc
 1173              	.LFE256:
 1175              		.section	.text.send_message_pack,"ax",%progbits
 1176              		.align	1
 1177              		.global	send_message_pack
 1178              		.syntax unified
 1179              		.thumb
 1180              		.thumb_func
 1181              		.fpu softvfp
 1183              	send_message_pack:
 1184              	.LFB257:
 357:Src/main.c    ****     char message_pack_str[100];
 1185              		.loc 1 357 0
 1186              		.cfi_startproc
 1187              		@ args = 0, pretend = 0, frame = 104
 1188              		@ frame_needed = 0, uses_anonymous_args = 0
 1189              	.LVL121:
 1190 0000 00B5     		push	{lr}
 1191              	.LCFI34:
 1192              		.cfi_def_cfa_offset 4
 1193              		.cfi_offset 14, -4
 1194 0002 9BB0     		sub	sp, sp, #108
 1195              	.LCFI35:
 1196              		.cfi_def_cfa_offset 112
 359:Src/main.c    ****     HAL_UART_Transmit(&huart1, message_pack_str, strlen(message_pack_str), 100);
 1197              		.loc 1 359 0
 1198 0004 0246     		mov	r2, r0
 1199 0006 0849     		ldr	r1, .L90
 1200 0008 01A8     		add	r0, sp, #4
 1201              	.LVL122:
 1202 000a FFF7FEFF 		bl	sprintf
 1203              	.LVL123:
 360:Src/main.c    **** }
 1204              		.loc 1 360 0
 1205 000e 01A8     		add	r0, sp, #4
 1206 0010 FFF7FEFF 		bl	strlen
 1207              	.LVL124:
 1208 0014 6423     		movs	r3, #100
 1209 0016 82B2     		uxth	r2, r0
 1210 0018 01A9     		add	r1, sp, #4
 1211 001a 0448     		ldr	r0, .L90+4
 1212 001c FFF7FEFF 		bl	HAL_UART_Transmit
 1213              	.LVL125:
 361:Src/main.c    **** 
 1214              		.loc 1 361 0
 1215 0020 1BB0     		add	sp, sp, #108
 1216              	.LCFI36:
ARM GAS  /tmp/ccDrtRJY.s 			page 39


 1217              		.cfi_def_cfa_offset 4
 1218              		@ sp needed
 1219 0022 5DF804FB 		ldr	pc, [sp], #4
 1220              	.L91:
 1221 0026 00BF     		.align	2
 1222              	.L90:
 1223 0028 00000000 		.word	.LC12
 1224 002c 00000000 		.word	huart1
 1225              		.cfi_endproc
 1226              	.LFE257:
 1228              		.section	.text.init_mailbox,"ax",%progbits
 1229              		.align	1
 1230              		.global	init_mailbox
 1231              		.syntax unified
 1232              		.thumb
 1233              		.thumb_func
 1234              		.fpu softvfp
 1236              	init_mailbox:
 1237              	.LFB258:
 368:Src/main.c    **** }
 1238              		.loc 1 368 0
 1239              		.cfi_startproc
 1240              		@ args = 0, pretend = 0, frame = 0
 1241              		@ frame_needed = 0, uses_anonymous_args = 0
 1242              		@ link register save eliminated.
 1243 0000 7047     		bx	lr
 1244              		.cfi_endproc
 1245              	.LFE258:
 1247              		.section	.text.mailbox_listen,"ax",%progbits
 1248              		.align	1
 1249              		.global	mailbox_listen
 1250              		.syntax unified
 1251              		.thumb
 1252              		.thumb_func
 1253              		.fpu softvfp
 1255              	mailbox_listen:
 1256              	.LFB260:
 392:Src/main.c    ****     HAL_UART_Receive_IT(&huart1, mailbox_buffer, 50);
 1257              		.loc 1 392 0
 1258              		.cfi_startproc
 1259              		@ args = 0, pretend = 0, frame = 0
 1260              		@ frame_needed = 0, uses_anonymous_args = 0
 392:Src/main.c    ****     HAL_UART_Receive_IT(&huart1, mailbox_buffer, 50);
 1261              		.loc 1 392 0
 1262 0000 08B5     		push	{r3, lr}
 1263              	.LCFI37:
 1264              		.cfi_def_cfa_offset 8
 1265              		.cfi_offset 3, -8
 1266              		.cfi_offset 14, -4
 393:Src/main.c    **** }
 1267              		.loc 1 393 0
 1268 0002 3222     		movs	r2, #50
 1269 0004 0249     		ldr	r1, .L95
 1270 0006 0348     		ldr	r0, .L95+4
 1271 0008 FFF7FEFF 		bl	HAL_UART_Receive_IT
 1272              	.LVL126:
 1273 000c 08BD     		pop	{r3, pc}
ARM GAS  /tmp/ccDrtRJY.s 			page 40


 1274              	.L96:
 1275 000e 00BF     		.align	2
 1276              	.L95:
 1277 0010 00000000 		.word	mailbox_buffer
 1278 0014 00000000 		.word	huart1
 1279              		.cfi_endproc
 1280              	.LFE260:
 1282              		.section	.text.mailbox_message_received,"ax",%progbits
 1283              		.align	1
 1284              		.global	mailbox_message_received
 1285              		.syntax unified
 1286              		.thumb
 1287              		.thumb_func
 1288              		.fpu softvfp
 1290              	mailbox_message_received:
 1291              	.LFB261:
 397:Src/main.c    ****     if(strcmp(message, "pause") == 0)
 1292              		.loc 1 397 0
 1293              		.cfi_startproc
 1294              		@ args = 0, pretend = 0, frame = 0
 1295              		@ frame_needed = 0, uses_anonymous_args = 0
 1296              	.LVL127:
 1297 0000 10B5     		push	{r4, lr}
 1298              	.LCFI38:
 1299              		.cfi_def_cfa_offset 8
 1300              		.cfi_offset 4, -8
 1301              		.cfi_offset 14, -4
 1302 0002 0446     		mov	r4, r0
 398:Src/main.c    ****     {
 1303              		.loc 1 398 0
 1304 0004 0B49     		ldr	r1, .L103
 1305 0006 FFF7FEFF 		bl	strcmp
 1306              	.LVL128:
 1307 000a 28B1     		cbz	r0, .L101
 403:Src/main.c    ****     {
 1308              		.loc 1 403 0
 1309 000c 0A49     		ldr	r1, .L103+4
 1310 000e 2046     		mov	r0, r4
 1311 0010 FFF7FEFF 		bl	strcmp
 1312              	.LVL129:
 1313 0014 38B1     		cbz	r0, .L102
 1314              	.L97:
 1315 0016 10BD     		pop	{r4, pc}
 1316              	.LVL130:
 1317              	.L101:
 400:Src/main.c    ****         HAL_NVIC_DisableIRQ(TIM4_IRQn);
 1318              		.loc 1 400 0
 1319 0018 1D20     		movs	r0, #29
 1320 001a FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 1321              	.LVL131:
 401:Src/main.c    ****     }
 1322              		.loc 1 401 0
 1323 001e 1E20     		movs	r0, #30
 1324 0020 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 1325              	.LVL132:
 1326 0024 10BD     		pop	{r4, pc}
 1327              	.LVL133:
ARM GAS  /tmp/ccDrtRJY.s 			page 41


 1328              	.L102:
 405:Src/main.c    ****         HAL_NVIC_EnableIRQ(TIM3_IRQn);
 1329              		.loc 1 405 0
 1330 0026 1E20     		movs	r0, #30
 1331 0028 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 1332              	.LVL134:
 406:Src/main.c    ****     }
 1333              		.loc 1 406 0
 1334 002c 1D20     		movs	r0, #29
 1335 002e FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 1336              	.LVL135:
 490:Src/main.c    **** 
 1337              		.loc 1 490 0
 1338 0032 F0E7     		b	.L97
 1339              	.L104:
 1340              		.align	2
 1341              	.L103:
 1342 0034 00000000 		.word	.LC13
 1343 0038 08000000 		.word	.LC14
 1344              		.cfi_endproc
 1345              	.LFE261:
 1347              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 1348              		.align	1
 1349              		.global	HAL_UART_RxCpltCallback
 1350              		.syntax unified
 1351              		.thumb
 1352              		.thumb_func
 1353              		.fpu softvfp
 1355              	HAL_UART_RxCpltCallback:
 1356              	.LFB259:
 375:Src/main.c    ****   for(int i = 0; i < 50; i++)
 1357              		.loc 1 375 0
 1358              		.cfi_startproc
 1359              		@ args = 0, pretend = 0, frame = 0
 1360              		@ frame_needed = 0, uses_anonymous_args = 0
 1361              	.LVL136:
 1362 0000 08B5     		push	{r3, lr}
 1363              	.LCFI39:
 1364              		.cfi_def_cfa_offset 8
 1365              		.cfi_offset 3, -8
 1366              		.cfi_offset 14, -4
 1367              	.LVL137:
 1368              	.LBB4:
 376:Src/main.c    ****   {
 1369              		.loc 1 376 0
 1370 0002 0023     		movs	r3, #0
 1371              	.LVL138:
 1372              	.L106:
 376:Src/main.c    ****   {
 1373              		.loc 1 376 0 is_stmt 0 discriminator 1
 1374 0004 312B     		cmp	r3, #49
 1375 0006 0BDC     		bgt	.L111
 378:Src/main.c    ****       { 
 1376              		.loc 1 378 0 is_stmt 1
 1377 0008 094A     		ldr	r2, .L113
 1378 000a D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 1379 000c 0A2A     		cmp	r2, #10
ARM GAS  /tmp/ccDrtRJY.s 			page 42


 1380 000e 01D0     		beq	.L112
 376:Src/main.c    ****   {
 1381              		.loc 1 376 0 discriminator 2
 1382 0010 0133     		adds	r3, r3, #1
 1383              	.LVL139:
 1384 0012 F7E7     		b	.L106
 1385              	.L112:
 380:Src/main.c    ****           //send_echo_pack(mailbox_buffer);
 1386              		.loc 1 380 0
 1387 0014 0648     		ldr	r0, .L113
 1388              	.LVL140:
 1389 0016 0022     		movs	r2, #0
 1390 0018 C254     		strb	r2, [r0, r3]
 382:Src/main.c    ****           return;
 1391              		.loc 1 382 0
 1392 001a FFF7FEFF 		bl	mailbox_message_received
 1393              	.LVL141:
 383:Src/main.c    ****       }
 1394              		.loc 1 383 0
 1395 001e 08BD     		pop	{r3, pc}
 1396              	.LVL142:
 1397              	.L111:
 1398              	.LBE4:
 387:Src/main.c    ****   mailbox_message_received(mailbox_buffer);
 1399              		.loc 1 387 0
 1400 0020 0348     		ldr	r0, .L113
 1401              	.LVL143:
 1402 0022 0023     		movs	r3, #0
 1403              	.LVL144:
 1404 0024 80F83130 		strb	r3, [r0, #49]
 388:Src/main.c    **** }
 1405              		.loc 1 388 0
 1406 0028 FFF7FEFF 		bl	mailbox_message_received
 1407              	.LVL145:
 1408 002c 08BD     		pop	{r3, pc}
 1409              	.L114:
 1410 002e 00BF     		.align	2
 1411              	.L113:
 1412 0030 00000000 		.word	mailbox_buffer
 1413              		.cfi_endproc
 1414              	.LFE259:
 1416              		.section	.text.Error_Handler,"ax",%progbits
 1417              		.align	1
 1418              		.global	Error_Handler
 1419              		.syntax unified
 1420              		.thumb
 1421              		.thumb_func
 1422              		.fpu softvfp
 1424              	Error_Handler:
 1425              	.LFB271:
 878:Src/main.c    **** 
 879:Src/main.c    **** /* USER CODE BEGIN 4 */
 880:Src/main.c    **** 
 881:Src/main.c    **** /* USER CODE END 4 */
 882:Src/main.c    **** 
 883:Src/main.c    **** /**
 884:Src/main.c    ****   * @brief  This function is executed in case of error occurrence.
ARM GAS  /tmp/ccDrtRJY.s 			page 43


 885:Src/main.c    ****   * @retval None
 886:Src/main.c    ****   */
 887:Src/main.c    **** void Error_Handler(void)
 888:Src/main.c    **** {
 1426              		.loc 1 888 0
 1427              		.cfi_startproc
 1428              		@ args = 0, pretend = 0, frame = 0
 1429              		@ frame_needed = 0, uses_anonymous_args = 0
 1430 0000 08B5     		push	{r3, lr}
 1431              	.LCFI40:
 1432              		.cfi_def_cfa_offset 8
 1433              		.cfi_offset 3, -8
 1434              		.cfi_offset 14, -4
 889:Src/main.c    ****   /* USER CODE BEGIN Error_Handler_Debug */
 890:Src/main.c    ****   /* User can add his own implementation to report the HAL error return state */
 891:Src/main.c    ****   error_alert("HAL Error_Handler call");
 1435              		.loc 1 891 0
 1436 0002 0248     		ldr	r0, .L117
 1437 0004 FFF7FEFF 		bl	error_alert
 1438              	.LVL146:
 1439 0008 08BD     		pop	{r3, pc}
 1440              	.L118:
 1441 000a 00BF     		.align	2
 1442              	.L117:
 1443 000c 00000000 		.word	.LC15
 1444              		.cfi_endproc
 1445              	.LFE271:
 1447              		.section	.text.MX_I2C2_Init,"ax",%progbits
 1448              		.align	1
 1449              		.syntax unified
 1450              		.thumb
 1451              		.thumb_func
 1452              		.fpu softvfp
 1454              	MX_I2C2_Init:
 1455              	.LFB264:
 610:Src/main.c    **** 
 1456              		.loc 1 610 0
 1457              		.cfi_startproc
 1458              		@ args = 0, pretend = 0, frame = 0
 1459              		@ frame_needed = 0, uses_anonymous_args = 0
 1460 0000 08B5     		push	{r3, lr}
 1461              	.LCFI41:
 1462              		.cfi_def_cfa_offset 8
 1463              		.cfi_offset 3, -8
 1464              		.cfi_offset 14, -4
 619:Src/main.c    ****   hi2c2.Init.ClockSpeed = 400000;
 1465              		.loc 1 619 0
 1466 0002 0B48     		ldr	r0, .L123
 1467 0004 0B4B     		ldr	r3, .L123+4
 1468 0006 0360     		str	r3, [r0]
 620:Src/main.c    ****   hi2c2.Init.DutyCycle = I2C_DUTYCYCLE_2;
 1469              		.loc 1 620 0
 1470 0008 0B4B     		ldr	r3, .L123+8
 1471 000a 4360     		str	r3, [r0, #4]
 621:Src/main.c    ****   hi2c2.Init.OwnAddress1 = 0;
 1472              		.loc 1 621 0
 1473 000c 0023     		movs	r3, #0
ARM GAS  /tmp/ccDrtRJY.s 			page 44


 1474 000e 8360     		str	r3, [r0, #8]
 622:Src/main.c    ****   hi2c2.Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
 1475              		.loc 1 622 0
 1476 0010 C360     		str	r3, [r0, #12]
 623:Src/main.c    ****   hi2c2.Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
 1477              		.loc 1 623 0
 1478 0012 4FF48042 		mov	r2, #16384
 1479 0016 0261     		str	r2, [r0, #16]
 624:Src/main.c    ****   hi2c2.Init.OwnAddress2 = 0;
 1480              		.loc 1 624 0
 1481 0018 4361     		str	r3, [r0, #20]
 625:Src/main.c    ****   hi2c2.Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
 1482              		.loc 1 625 0
 1483 001a 8361     		str	r3, [r0, #24]
 626:Src/main.c    ****   hi2c2.Init.NoStretchMode = I2C_NOSTRETCH_DISABLE;
 1484              		.loc 1 626 0
 1485 001c C361     		str	r3, [r0, #28]
 627:Src/main.c    ****   if (HAL_I2C_Init(&hi2c2) != HAL_OK)
 1486              		.loc 1 627 0
 1487 001e 0362     		str	r3, [r0, #32]
 628:Src/main.c    ****   {
 1488              		.loc 1 628 0
 1489 0020 FFF7FEFF 		bl	HAL_I2C_Init
 1490              	.LVL147:
 1491 0024 00B9     		cbnz	r0, .L122
 1492              	.L119:
 1493 0026 08BD     		pop	{r3, pc}
 1494              	.L122:
 630:Src/main.c    ****   }
 1495              		.loc 1 630 0
 1496 0028 FFF7FEFF 		bl	Error_Handler
 1497              	.LVL148:
 636:Src/main.c    **** 
 1498              		.loc 1 636 0
 1499 002c FBE7     		b	.L119
 1500              	.L124:
 1501 002e 00BF     		.align	2
 1502              	.L123:
 1503 0030 00000000 		.word	hi2c2
 1504 0034 00580040 		.word	1073764352
 1505 0038 801A0600 		.word	400000
 1506              		.cfi_endproc
 1507              	.LFE264:
 1509              		.section	.text.MX_TIM2_Init,"ax",%progbits
 1510              		.align	1
 1511              		.syntax unified
 1512              		.thumb
 1513              		.thumb_func
 1514              		.fpu softvfp
 1516              	MX_TIM2_Init:
 1517              	.LFB266:
 674:Src/main.c    **** 
 1518              		.loc 1 674 0
 1519              		.cfi_startproc
 1520              		@ args = 0, pretend = 0, frame = 24
 1521              		@ frame_needed = 0, uses_anonymous_args = 0
 1522 0000 00B5     		push	{lr}
ARM GAS  /tmp/ccDrtRJY.s 			page 45


 1523              	.LCFI42:
 1524              		.cfi_def_cfa_offset 4
 1525              		.cfi_offset 14, -4
 1526 0002 87B0     		sub	sp, sp, #28
 1527              	.LCFI43:
 1528              		.cfi_def_cfa_offset 32
 680:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig = {0};
 1529              		.loc 1 680 0
 1530 0004 0023     		movs	r3, #0
 1531 0006 0293     		str	r3, [sp, #8]
 1532 0008 0393     		str	r3, [sp, #12]
 1533 000a 0493     		str	r3, [sp, #16]
 1534 000c 0593     		str	r3, [sp, #20]
 681:Src/main.c    **** 
 1535              		.loc 1 681 0
 1536 000e 0093     		str	r3, [sp]
 1537 0010 0193     		str	r3, [sp, #4]
 686:Src/main.c    ****   htim2.Init.Prescaler = 9000;
 1538              		.loc 1 686 0
 1539 0012 1648     		ldr	r0, .L133
 1540 0014 4FF08042 		mov	r2, #1073741824
 1541 0018 0260     		str	r2, [r0]
 687:Src/main.c    ****   htim2.Init.CounterMode = TIM_COUNTERMODE_UP;
 1542              		.loc 1 687 0
 1543 001a 42F22832 		movw	r2, #9000
 1544 001e 4260     		str	r2, [r0, #4]
 688:Src/main.c    ****   htim2.Init.Period = 60;
 1545              		.loc 1 688 0
 1546 0020 8360     		str	r3, [r0, #8]
 689:Src/main.c    ****   htim2.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 1547              		.loc 1 689 0
 1548 0022 3C22     		movs	r2, #60
 1549 0024 C260     		str	r2, [r0, #12]
 690:Src/main.c    ****   htim2.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 1550              		.loc 1 690 0
 1551 0026 0361     		str	r3, [r0, #16]
 691:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim2) != HAL_OK)
 1552              		.loc 1 691 0
 1553 0028 8361     		str	r3, [r0, #24]
 692:Src/main.c    ****   {
 1554              		.loc 1 692 0
 1555 002a FFF7FEFF 		bl	HAL_TIM_Base_Init
 1556              	.LVL149:
 1557 002e 98B9     		cbnz	r0, .L130
 1558              	.L126:
 696:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim2, &sClockSourceConfig) != HAL_OK)
 1559              		.loc 1 696 0
 1560 0030 06A9     		add	r1, sp, #24
 1561 0032 4FF48053 		mov	r3, #4096
 1562 0036 41F8103D 		str	r3, [r1, #-16]!
 697:Src/main.c    ****   {
 1563              		.loc 1 697 0
 1564 003a 0C48     		ldr	r0, .L133
 1565 003c FFF7FEFF 		bl	HAL_TIM_ConfigClockSource
 1566              	.LVL150:
 1567 0040 68B9     		cbnz	r0, .L131
 1568              	.L127:
ARM GAS  /tmp/ccDrtRJY.s 			page 46


 701:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 1569              		.loc 1 701 0
 1570 0042 0023     		movs	r3, #0
 1571 0044 0093     		str	r3, [sp]
 702:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim2, &sMasterConfig) != HAL_OK)
 1572              		.loc 1 702 0
 1573 0046 0193     		str	r3, [sp, #4]
 703:Src/main.c    ****   {
 1574              		.loc 1 703 0
 1575 0048 6946     		mov	r1, sp
 1576 004a 0848     		ldr	r0, .L133
 1577 004c FFF7FEFF 		bl	HAL_TIMEx_MasterConfigSynchronization
 1578              	.LVL151:
 1579 0050 40B9     		cbnz	r0, .L132
 1580              	.L125:
 711:Src/main.c    **** 
 1581              		.loc 1 711 0
 1582 0052 07B0     		add	sp, sp, #28
 1583              	.LCFI44:
 1584              		.cfi_remember_state
 1585              		.cfi_def_cfa_offset 4
 1586              		@ sp needed
 1587 0054 5DF804FB 		ldr	pc, [sp], #4
 1588              	.L130:
 1589              	.LCFI45:
 1590              		.cfi_restore_state
 694:Src/main.c    ****   }
 1591              		.loc 1 694 0
 1592 0058 FFF7FEFF 		bl	Error_Handler
 1593              	.LVL152:
 1594 005c E8E7     		b	.L126
 1595              	.L131:
 699:Src/main.c    ****   }
 1596              		.loc 1 699 0
 1597 005e FFF7FEFF 		bl	Error_Handler
 1598              	.LVL153:
 1599 0062 EEE7     		b	.L127
 1600              	.L132:
 705:Src/main.c    ****   }
 1601              		.loc 1 705 0
 1602 0064 FFF7FEFF 		bl	Error_Handler
 1603              	.LVL154:
 711:Src/main.c    **** 
 1604              		.loc 1 711 0
 1605 0068 F3E7     		b	.L125
 1606              	.L134:
 1607 006a 00BF     		.align	2
 1608              	.L133:
 1609 006c 00000000 		.word	htim2
 1610              		.cfi_endproc
 1611              	.LFE266:
 1613              		.section	.text.MX_TIM3_Init,"ax",%progbits
 1614              		.align	1
 1615              		.syntax unified
 1616              		.thumb
 1617              		.thumb_func
 1618              		.fpu softvfp
ARM GAS  /tmp/ccDrtRJY.s 			page 47


 1620              	MX_TIM3_Init:
 1621              	.LFB267:
 719:Src/main.c    **** 
 1622              		.loc 1 719 0
 1623              		.cfi_startproc
 1624              		@ args = 0, pretend = 0, frame = 56
 1625              		@ frame_needed = 0, uses_anonymous_args = 0
 1626 0000 00B5     		push	{lr}
 1627              	.LCFI46:
 1628              		.cfi_def_cfa_offset 4
 1629              		.cfi_offset 14, -4
 1630 0002 8FB0     		sub	sp, sp, #60
 1631              	.LCFI47:
 1632              		.cfi_def_cfa_offset 64
 725:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig = {0};
 1633              		.loc 1 725 0
 1634 0004 0023     		movs	r3, #0
 1635 0006 0A93     		str	r3, [sp, #40]
 1636 0008 0B93     		str	r3, [sp, #44]
 1637 000a 0C93     		str	r3, [sp, #48]
 1638 000c 0D93     		str	r3, [sp, #52]
 726:Src/main.c    ****   TIM_OC_InitTypeDef sConfigOC = {0};
 1639              		.loc 1 726 0
 1640 000e 0893     		str	r3, [sp, #32]
 1641 0010 0993     		str	r3, [sp, #36]
 727:Src/main.c    **** 
 1642              		.loc 1 727 0
 1643 0012 0193     		str	r3, [sp, #4]
 1644 0014 0293     		str	r3, [sp, #8]
 1645 0016 0393     		str	r3, [sp, #12]
 1646 0018 0493     		str	r3, [sp, #16]
 1647 001a 0593     		str	r3, [sp, #20]
 1648 001c 0693     		str	r3, [sp, #24]
 1649 001e 0793     		str	r3, [sp, #28]
 732:Src/main.c    ****   htim3.Init.Prescaler = 16;
 1650              		.loc 1 732 0
 1651 0020 2648     		ldr	r0, .L149
 1652 0022 274A     		ldr	r2, .L149+4
 1653 0024 0260     		str	r2, [r0]
 733:Src/main.c    ****   htim3.Init.CounterMode = TIM_COUNTERMODE_UP;
 1654              		.loc 1 733 0
 1655 0026 1022     		movs	r2, #16
 1656 0028 4260     		str	r2, [r0, #4]
 734:Src/main.c    ****   htim3.Init.Period = 10000;
 1657              		.loc 1 734 0
 1658 002a 8360     		str	r3, [r0, #8]
 735:Src/main.c    ****   htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 1659              		.loc 1 735 0
 1660 002c 42F21072 		movw	r2, #10000
 1661 0030 C260     		str	r2, [r0, #12]
 736:Src/main.c    ****   htim3.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 1662              		.loc 1 736 0
 1663 0032 0361     		str	r3, [r0, #16]
 737:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim3) != HAL_OK)
 1664              		.loc 1 737 0
 1665 0034 8361     		str	r3, [r0, #24]
 738:Src/main.c    ****   {
ARM GAS  /tmp/ccDrtRJY.s 			page 48


 1666              		.loc 1 738 0
 1667 0036 FFF7FEFF 		bl	HAL_TIM_Base_Init
 1668              	.LVL155:
 1669 003a 60BB     		cbnz	r0, .L143
 1670              	.L136:
 742:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim3, &sClockSourceConfig) != HAL_OK)
 1671              		.loc 1 742 0
 1672 003c 0EA9     		add	r1, sp, #56
 1673 003e 4FF48053 		mov	r3, #4096
 1674 0042 41F8103D 		str	r3, [r1, #-16]!
 743:Src/main.c    ****   {
 1675              		.loc 1 743 0
 1676 0046 1D48     		ldr	r0, .L149
 1677 0048 FFF7FEFF 		bl	HAL_TIM_ConfigClockSource
 1678              	.LVL156:
 1679 004c 30BB     		cbnz	r0, .L144
 1680              	.L137:
 747:Src/main.c    ****   {
 1681              		.loc 1 747 0
 1682 004e 1B48     		ldr	r0, .L149
 1683 0050 FFF7FEFF 		bl	HAL_TIM_PWM_Init
 1684              	.LVL157:
 1685 0054 28BB     		cbnz	r0, .L145
 1686              	.L138:
 751:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 1687              		.loc 1 751 0
 1688 0056 0023     		movs	r3, #0
 1689 0058 0893     		str	r3, [sp, #32]
 752:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim3, &sMasterConfig) != HAL_OK)
 1690              		.loc 1 752 0
 1691 005a 0993     		str	r3, [sp, #36]
 753:Src/main.c    ****   {
 1692              		.loc 1 753 0
 1693 005c 08A9     		add	r1, sp, #32
 1694 005e 1748     		ldr	r0, .L149
 1695 0060 FFF7FEFF 		bl	HAL_TIMEx_MasterConfigSynchronization
 1696              	.LVL158:
 1697 0064 00BB     		cbnz	r0, .L146
 1698              	.L139:
 757:Src/main.c    ****   sConfigOC.Pulse = 0;
 1699              		.loc 1 757 0
 1700 0066 6023     		movs	r3, #96
 1701 0068 0193     		str	r3, [sp, #4]
 758:Src/main.c    ****   sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH;
 1702              		.loc 1 758 0
 1703 006a 0022     		movs	r2, #0
 1704 006c 0292     		str	r2, [sp, #8]
 759:Src/main.c    ****   sConfigOC.OCFastMode = TIM_OCFAST_DISABLE;
 1705              		.loc 1 759 0
 1706 006e 0392     		str	r2, [sp, #12]
 760:Src/main.c    ****   if (HAL_TIM_PWM_ConfigChannel(&htim3, &sConfigOC, TIM_CHANNEL_1) != HAL_OK)
 1707              		.loc 1 760 0
 1708 0070 0592     		str	r2, [sp, #20]
 761:Src/main.c    ****   {
 1709              		.loc 1 761 0
 1710 0072 01A9     		add	r1, sp, #4
 1711 0074 1148     		ldr	r0, .L149
ARM GAS  /tmp/ccDrtRJY.s 			page 49


 1712 0076 FFF7FEFF 		bl	HAL_TIM_PWM_ConfigChannel
 1713              	.LVL159:
 1714 007a C0B9     		cbnz	r0, .L147
 1715              	.L140:
 765:Src/main.c    ****   {
 1716              		.loc 1 765 0
 1717 007c 0422     		movs	r2, #4
 1718 007e 0DEB0201 		add	r1, sp, r2
 1719 0082 0E48     		ldr	r0, .L149
 1720 0084 FFF7FEFF 		bl	HAL_TIM_PWM_ConfigChannel
 1721              	.LVL160:
 1722 0088 A0B9     		cbnz	r0, .L148
 1723              	.L141:
 772:Src/main.c    **** 
 1724              		.loc 1 772 0
 1725 008a 0C48     		ldr	r0, .L149
 1726 008c FFF7FEFF 		bl	HAL_TIM_MspPostInit
 1727              	.LVL161:
 774:Src/main.c    **** 
 1728              		.loc 1 774 0
 1729 0090 0FB0     		add	sp, sp, #60
 1730              	.LCFI48:
 1731              		.cfi_remember_state
 1732              		.cfi_def_cfa_offset 4
 1733              		@ sp needed
 1734 0092 5DF804FB 		ldr	pc, [sp], #4
 1735              	.L143:
 1736              	.LCFI49:
 1737              		.cfi_restore_state
 740:Src/main.c    ****   }
 1738              		.loc 1 740 0
 1739 0096 FFF7FEFF 		bl	Error_Handler
 1740              	.LVL162:
 1741 009a CFE7     		b	.L136
 1742              	.L144:
 745:Src/main.c    ****   }
 1743              		.loc 1 745 0
 1744 009c FFF7FEFF 		bl	Error_Handler
 1745              	.LVL163:
 1746 00a0 D5E7     		b	.L137
 1747              	.L145:
 749:Src/main.c    ****   }
 1748              		.loc 1 749 0
 1749 00a2 FFF7FEFF 		bl	Error_Handler
 1750              	.LVL164:
 1751 00a6 D6E7     		b	.L138
 1752              	.L146:
 755:Src/main.c    ****   }
 1753              		.loc 1 755 0
 1754 00a8 FFF7FEFF 		bl	Error_Handler
 1755              	.LVL165:
 1756 00ac DBE7     		b	.L139
 1757              	.L147:
 763:Src/main.c    ****   }
 1758              		.loc 1 763 0
 1759 00ae FFF7FEFF 		bl	Error_Handler
 1760              	.LVL166:
ARM GAS  /tmp/ccDrtRJY.s 			page 50


 1761 00b2 E3E7     		b	.L140
 1762              	.L148:
 767:Src/main.c    ****   }
 1763              		.loc 1 767 0
 1764 00b4 FFF7FEFF 		bl	Error_Handler
 1765              	.LVL167:
 1766 00b8 E7E7     		b	.L141
 1767              	.L150:
 1768 00ba 00BF     		.align	2
 1769              	.L149:
 1770 00bc 00000000 		.word	htim3
 1771 00c0 00040040 		.word	1073742848
 1772              		.cfi_endproc
 1773              	.LFE267:
 1775              		.section	.text.MX_USART1_UART_Init,"ax",%progbits
 1776              		.align	1
 1777              		.syntax unified
 1778              		.thumb
 1779              		.thumb_func
 1780              		.fpu softvfp
 1782              	MX_USART1_UART_Init:
 1783              	.LFB269:
 827:Src/main.c    **** 
 1784              		.loc 1 827 0
 1785              		.cfi_startproc
 1786              		@ args = 0, pretend = 0, frame = 0
 1787              		@ frame_needed = 0, uses_anonymous_args = 0
 1788 0000 08B5     		push	{r3, lr}
 1789              	.LCFI50:
 1790              		.cfi_def_cfa_offset 8
 1791              		.cfi_offset 3, -8
 1792              		.cfi_offset 14, -4
 836:Src/main.c    ****   huart1.Init.BaudRate = 115200;
 1793              		.loc 1 836 0
 1794 0002 0B48     		ldr	r0, .L155
 1795 0004 0B4B     		ldr	r3, .L155+4
 1796 0006 0360     		str	r3, [r0]
 837:Src/main.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 1797              		.loc 1 837 0
 1798 0008 4FF4E133 		mov	r3, #115200
 1799 000c 4360     		str	r3, [r0, #4]
 838:Src/main.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 1800              		.loc 1 838 0
 1801 000e 0021     		movs	r1, #0
 1802 0010 8160     		str	r1, [r0, #8]
 839:Src/main.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 1803              		.loc 1 839 0
 1804 0012 C160     		str	r1, [r0, #12]
 840:Src/main.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 1805              		.loc 1 840 0
 1806 0014 0161     		str	r1, [r0, #16]
 841:Src/main.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 1807              		.loc 1 841 0
 1808 0016 0C23     		movs	r3, #12
 1809 0018 4361     		str	r3, [r0, #20]
 842:Src/main.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 1810              		.loc 1 842 0
ARM GAS  /tmp/ccDrtRJY.s 			page 51


 1811 001a 8161     		str	r1, [r0, #24]
 843:Src/main.c    ****   if (HAL_MultiProcessor_Init(&huart1, 0, UART_WAKEUPMETHOD_IDLELINE) != HAL_OK)
 1812              		.loc 1 843 0
 1813 001c C161     		str	r1, [r0, #28]
 844:Src/main.c    ****   {
 1814              		.loc 1 844 0
 1815 001e 0A46     		mov	r2, r1
 1816 0020 FFF7FEFF 		bl	HAL_MultiProcessor_Init
 1817              	.LVL168:
 1818 0024 00B9     		cbnz	r0, .L154
 1819              	.L151:
 1820 0026 08BD     		pop	{r3, pc}
 1821              	.L154:
 846:Src/main.c    ****   }
 1822              		.loc 1 846 0
 1823 0028 FFF7FEFF 		bl	Error_Handler
 1824              	.LVL169:
 852:Src/main.c    **** 
 1825              		.loc 1 852 0
 1826 002c FBE7     		b	.L151
 1827              	.L156:
 1828 002e 00BF     		.align	2
 1829              	.L155:
 1830 0030 00000000 		.word	huart1
 1831 0034 00380140 		.word	1073821696
 1832              		.cfi_endproc
 1833              	.LFE269:
 1835              		.section	.text.MX_RTC_Init,"ax",%progbits
 1836              		.align	1
 1837              		.syntax unified
 1838              		.thumb
 1839              		.thumb_func
 1840              		.fpu softvfp
 1842              	MX_RTC_Init:
 1843              	.LFB265:
 644:Src/main.c    **** 
 1844              		.loc 1 644 0
 1845              		.cfi_startproc
 1846              		@ args = 0, pretend = 0, frame = 0
 1847              		@ frame_needed = 0, uses_anonymous_args = 0
 1848 0000 08B5     		push	{r3, lr}
 1849              	.LCFI51:
 1850              		.cfi_def_cfa_offset 8
 1851              		.cfi_offset 3, -8
 1852              		.cfi_offset 14, -4
 655:Src/main.c    ****   hrtc.Init.AsynchPrediv = RTC_AUTO_1_SECOND;
 1853              		.loc 1 655 0
 1854 0002 0848     		ldr	r0, .L161
 1855 0004 084B     		ldr	r3, .L161+4
 1856 0006 0360     		str	r3, [r0]
 656:Src/main.c    ****   hrtc.Init.OutPut = RTC_OUTPUTSOURCE_ALARM;
 1857              		.loc 1 656 0
 1858 0008 4FF0FF33 		mov	r3, #-1
 1859 000c 4360     		str	r3, [r0, #4]
 657:Src/main.c    ****   if (HAL_RTC_Init(&hrtc) != HAL_OK)
 1860              		.loc 1 657 0
 1861 000e 4FF48073 		mov	r3, #256
ARM GAS  /tmp/ccDrtRJY.s 			page 52


 1862 0012 8360     		str	r3, [r0, #8]
 658:Src/main.c    ****   {
 1863              		.loc 1 658 0
 1864 0014 FFF7FEFF 		bl	HAL_RTC_Init
 1865              	.LVL170:
 1866 0018 00B9     		cbnz	r0, .L160
 1867              	.L157:
 1868 001a 08BD     		pop	{r3, pc}
 1869              	.L160:
 660:Src/main.c    ****   }
 1870              		.loc 1 660 0
 1871 001c FFF7FEFF 		bl	Error_Handler
 1872              	.LVL171:
 666:Src/main.c    **** 
 1873              		.loc 1 666 0
 1874 0020 FBE7     		b	.L157
 1875              	.L162:
 1876 0022 00BF     		.align	2
 1877              	.L161:
 1878 0024 00000000 		.word	hrtc
 1879 0028 00280040 		.word	1073752064
 1880              		.cfi_endproc
 1881              	.LFE265:
 1883              		.section	.text.MX_TIM4_Init,"ax",%progbits
 1884              		.align	1
 1885              		.syntax unified
 1886              		.thumb
 1887              		.thumb_func
 1888              		.fpu softvfp
 1890              	MX_TIM4_Init:
 1891              	.LFB268:
 782:Src/main.c    **** 
 1892              		.loc 1 782 0
 1893              		.cfi_startproc
 1894              		@ args = 0, pretend = 0, frame = 24
 1895              		@ frame_needed = 0, uses_anonymous_args = 0
 1896 0000 00B5     		push	{lr}
 1897              	.LCFI52:
 1898              		.cfi_def_cfa_offset 4
 1899              		.cfi_offset 14, -4
 1900 0002 87B0     		sub	sp, sp, #28
 1901              	.LCFI53:
 1902              		.cfi_def_cfa_offset 32
 788:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig = {0};
 1903              		.loc 1 788 0
 1904 0004 0023     		movs	r3, #0
 1905 0006 0293     		str	r3, [sp, #8]
 1906 0008 0393     		str	r3, [sp, #12]
 1907 000a 0493     		str	r3, [sp, #16]
 1908 000c 0593     		str	r3, [sp, #20]
 789:Src/main.c    **** 
 1909              		.loc 1 789 0
 1910 000e 0093     		str	r3, [sp]
 1911 0010 0193     		str	r3, [sp, #4]
 794:Src/main.c    ****   htim4.Init.Prescaler = 8;
 1912              		.loc 1 794 0
 1913 0012 1548     		ldr	r0, .L171
ARM GAS  /tmp/ccDrtRJY.s 			page 53


 1914 0014 154A     		ldr	r2, .L171+4
 1915 0016 0260     		str	r2, [r0]
 795:Src/main.c    ****   htim4.Init.CounterMode = TIM_COUNTERMODE_UP;
 1916              		.loc 1 795 0
 1917 0018 0822     		movs	r2, #8
 1918 001a 4260     		str	r2, [r0, #4]
 796:Src/main.c    ****   htim4.Init.Period = 5000;
 1919              		.loc 1 796 0
 1920 001c 8360     		str	r3, [r0, #8]
 797:Src/main.c    ****   htim4.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 1921              		.loc 1 797 0
 1922 001e 41F28832 		movw	r2, #5000
 1923 0022 C260     		str	r2, [r0, #12]
 798:Src/main.c    ****   htim4.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 1924              		.loc 1 798 0
 1925 0024 0361     		str	r3, [r0, #16]
 799:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim4) != HAL_OK)
 1926              		.loc 1 799 0
 1927 0026 8361     		str	r3, [r0, #24]
 800:Src/main.c    ****   {
 1928              		.loc 1 800 0
 1929 0028 FFF7FEFF 		bl	HAL_TIM_Base_Init
 1930              	.LVL172:
 1931 002c 98B9     		cbnz	r0, .L168
 1932              	.L164:
 804:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim4, &sClockSourceConfig) != HAL_OK)
 1933              		.loc 1 804 0
 1934 002e 06A9     		add	r1, sp, #24
 1935 0030 4FF48053 		mov	r3, #4096
 1936 0034 41F8103D 		str	r3, [r1, #-16]!
 805:Src/main.c    ****   {
 1937              		.loc 1 805 0
 1938 0038 0B48     		ldr	r0, .L171
 1939 003a FFF7FEFF 		bl	HAL_TIM_ConfigClockSource
 1940              	.LVL173:
 1941 003e 68B9     		cbnz	r0, .L169
 1942              	.L165:
 809:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 1943              		.loc 1 809 0
 1944 0040 0023     		movs	r3, #0
 1945 0042 0093     		str	r3, [sp]
 810:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim4, &sMasterConfig) != HAL_OK)
 1946              		.loc 1 810 0
 1947 0044 0193     		str	r3, [sp, #4]
 811:Src/main.c    ****   {
 1948              		.loc 1 811 0
 1949 0046 6946     		mov	r1, sp
 1950 0048 0748     		ldr	r0, .L171
 1951 004a FFF7FEFF 		bl	HAL_TIMEx_MasterConfigSynchronization
 1952              	.LVL174:
 1953 004e 40B9     		cbnz	r0, .L170
 1954              	.L163:
 819:Src/main.c    **** 
 1955              		.loc 1 819 0
 1956 0050 07B0     		add	sp, sp, #28
 1957              	.LCFI54:
 1958              		.cfi_remember_state
ARM GAS  /tmp/ccDrtRJY.s 			page 54


 1959              		.cfi_def_cfa_offset 4
 1960              		@ sp needed
 1961 0052 5DF804FB 		ldr	pc, [sp], #4
 1962              	.L168:
 1963              	.LCFI55:
 1964              		.cfi_restore_state
 802:Src/main.c    ****   }
 1965              		.loc 1 802 0
 1966 0056 FFF7FEFF 		bl	Error_Handler
 1967              	.LVL175:
 1968 005a E8E7     		b	.L164
 1969              	.L169:
 807:Src/main.c    ****   }
 1970              		.loc 1 807 0
 1971 005c FFF7FEFF 		bl	Error_Handler
 1972              	.LVL176:
 1973 0060 EEE7     		b	.L165
 1974              	.L170:
 813:Src/main.c    ****   }
 1975              		.loc 1 813 0
 1976 0062 FFF7FEFF 		bl	Error_Handler
 1977              	.LVL177:
 819:Src/main.c    **** 
 1978              		.loc 1 819 0
 1979 0066 F3E7     		b	.L163
 1980              	.L172:
 1981              		.align	2
 1982              	.L171:
 1983 0068 00000000 		.word	htim4
 1984 006c 00080040 		.word	1073743872
 1985              		.cfi_endproc
 1986              	.LFE268:
 1988              		.section	.text.SystemClock_Config,"ax",%progbits
 1989              		.align	1
 1990              		.global	SystemClock_Config
 1991              		.syntax unified
 1992              		.thumb
 1993              		.thumb_func
 1994              		.fpu softvfp
 1996              	SystemClock_Config:
 1997              	.LFB263:
 565:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 1998              		.loc 1 565 0
 1999              		.cfi_startproc
 2000              		@ args = 0, pretend = 0, frame = 80
 2001              		@ frame_needed = 0, uses_anonymous_args = 0
 2002 0000 00B5     		push	{lr}
 2003              	.LCFI56:
 2004              		.cfi_def_cfa_offset 4
 2005              		.cfi_offset 14, -4
 2006 0002 95B0     		sub	sp, sp, #84
 2007              	.LCFI57:
 2008              		.cfi_def_cfa_offset 88
 566:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 2009              		.loc 1 566 0
 2010 0004 2822     		movs	r2, #40
 2011 0006 0021     		movs	r1, #0
ARM GAS  /tmp/ccDrtRJY.s 			page 55


 2012 0008 0DEB0200 		add	r0, sp, r2
 2013 000c FFF7FEFF 		bl	memset
 2014              	.LVL178:
 567:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 2015              		.loc 1 567 0
 2016 0010 0023     		movs	r3, #0
 2017 0012 0593     		str	r3, [sp, #20]
 2018 0014 0693     		str	r3, [sp, #24]
 2019 0016 0793     		str	r3, [sp, #28]
 2020 0018 0893     		str	r3, [sp, #32]
 2021 001a 0993     		str	r3, [sp, #36]
 568:Src/main.c    **** 
 2022              		.loc 1 568 0
 2023 001c 0193     		str	r3, [sp, #4]
 2024 001e 0293     		str	r3, [sp, #8]
 2025 0020 0393     		str	r3, [sp, #12]
 2026 0022 0493     		str	r3, [sp, #16]
 572:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 2027              		.loc 1 572 0
 2028 0024 0A23     		movs	r3, #10
 2029 0026 0A93     		str	r3, [sp, #40]
 573:Src/main.c    ****   RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
 2030              		.loc 1 573 0
 2031 0028 0123     		movs	r3, #1
 2032 002a 0E93     		str	r3, [sp, #56]
 574:Src/main.c    ****   RCC_OscInitStruct.LSIState = RCC_LSI_ON;
 2033              		.loc 1 574 0
 2034 002c 1022     		movs	r2, #16
 2035 002e 0F92     		str	r2, [sp, #60]
 575:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 2036              		.loc 1 575 0
 2037 0030 1093     		str	r3, [sp, #64]
 576:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI_DIV2;
 2038              		.loc 1 576 0
 2039 0032 0223     		movs	r3, #2
 2040 0034 1193     		str	r3, [sp, #68]
 579:Src/main.c    ****   {
 2041              		.loc 1 579 0
 2042 0036 0AA8     		add	r0, sp, #40
 2043 0038 FFF7FEFF 		bl	HAL_RCC_OscConfig
 2044              	.LVL179:
 2045 003c B8B9     		cbnz	r0, .L178
 2046              	.L174:
 585:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 2047              		.loc 1 585 0
 2048 003e 0F23     		movs	r3, #15
 2049 0040 0593     		str	r3, [sp, #20]
 587:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 2050              		.loc 1 587 0
 2051 0042 0223     		movs	r3, #2
 2052 0044 0693     		str	r3, [sp, #24]
 588:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 2053              		.loc 1 588 0
 2054 0046 0021     		movs	r1, #0
 2055 0048 0791     		str	r1, [sp, #28]
 589:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 2056              		.loc 1 589 0
ARM GAS  /tmp/ccDrtRJY.s 			page 56


 2057 004a 0891     		str	r1, [sp, #32]
 590:Src/main.c    **** 
 2058              		.loc 1 590 0
 2059 004c 0991     		str	r1, [sp, #36]
 592:Src/main.c    ****   {
 2060              		.loc 1 592 0
 2061 004e 05A8     		add	r0, sp, #20
 2062 0050 FFF7FEFF 		bl	HAL_RCC_ClockConfig
 2063              	.LVL180:
 2064 0054 70B9     		cbnz	r0, .L179
 2065              	.L175:
 596:Src/main.c    ****   PeriphClkInit.RTCClockSelection = RCC_RTCCLKSOURCE_LSI;
 2066              		.loc 1 596 0
 2067 0056 0123     		movs	r3, #1
 2068 0058 0193     		str	r3, [sp, #4]
 597:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 2069              		.loc 1 597 0
 2070 005a 4FF40073 		mov	r3, #512
 2071 005e 0293     		str	r3, [sp, #8]
 598:Src/main.c    ****   {
 2072              		.loc 1 598 0
 2073 0060 01A8     		add	r0, sp, #4
 2074 0062 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 2075              	.LVL181:
 2076 0066 40B9     		cbnz	r0, .L180
 2077              	.L173:
 602:Src/main.c    **** 
 2078              		.loc 1 602 0
 2079 0068 15B0     		add	sp, sp, #84
 2080              	.LCFI58:
 2081              		.cfi_remember_state
 2082              		.cfi_def_cfa_offset 4
 2083              		@ sp needed
 2084 006a 5DF804FB 		ldr	pc, [sp], #4
 2085              	.L178:
 2086              	.LCFI59:
 2087              		.cfi_restore_state
 581:Src/main.c    ****   }
 2088              		.loc 1 581 0
 2089 006e FFF7FEFF 		bl	Error_Handler
 2090              	.LVL182:
 2091 0072 E4E7     		b	.L174
 2092              	.L179:
 594:Src/main.c    ****   }
 2093              		.loc 1 594 0
 2094 0074 FFF7FEFF 		bl	Error_Handler
 2095              	.LVL183:
 2096 0078 EDE7     		b	.L175
 2097              	.L180:
 600:Src/main.c    ****   }
 2098              		.loc 1 600 0
 2099 007a FFF7FEFF 		bl	Error_Handler
 2100              	.LVL184:
 602:Src/main.c    **** 
 2101              		.loc 1 602 0
 2102 007e F3E7     		b	.L173
 2103              		.cfi_endproc
ARM GAS  /tmp/ccDrtRJY.s 			page 57


 2104              	.LFE263:
 2106              		.section	.text.main,"ax",%progbits
 2107              		.align	1
 2108              		.global	main
 2109              		.syntax unified
 2110              		.thumb
 2111              		.thumb_func
 2112              		.fpu softvfp
 2114              	main:
 2115              	.LFB262:
 499:Src/main.c    ****   /* USER CODE BEGIN 1 */
 2116              		.loc 1 499 0
 2117              		.cfi_startproc
 2118              		@ Volatile: function does not return.
 2119              		@ args = 0, pretend = 0, frame = 0
 2120              		@ frame_needed = 0, uses_anonymous_args = 0
 2121 0000 08B5     		push	{r3, lr}
 2122              	.LCFI60:
 2123              		.cfi_def_cfa_offset 8
 2124              		.cfi_offset 3, -8
 2125              		.cfi_offset 14, -4
 508:Src/main.c    **** 
 2126              		.loc 1 508 0
 2127 0002 FFF7FEFF 		bl	HAL_Init
 2128              	.LVL185:
 515:Src/main.c    **** 
 2129              		.loc 1 515 0
 2130 0006 FFF7FEFF 		bl	SystemClock_Config
 2131              	.LVL186:
 522:Src/main.c    ****   MX_I2C2_Init();
 2132              		.loc 1 522 0
 2133 000a FFF7FEFF 		bl	MX_GPIO_Init
 2134              	.LVL187:
 523:Src/main.c    ****   MX_TIM2_Init();
 2135              		.loc 1 523 0
 2136 000e FFF7FEFF 		bl	MX_I2C2_Init
 2137              	.LVL188:
 524:Src/main.c    ****   MX_TIM3_Init();
 2138              		.loc 1 524 0
 2139 0012 FFF7FEFF 		bl	MX_TIM2_Init
 2140              	.LVL189:
 525:Src/main.c    ****   MX_USART1_UART_Init();
 2141              		.loc 1 525 0
 2142 0016 FFF7FEFF 		bl	MX_TIM3_Init
 2143              	.LVL190:
 526:Src/main.c    ****   MX_RTC_Init();
 2144              		.loc 1 526 0
 2145 001a FFF7FEFF 		bl	MX_USART1_UART_Init
 2146              	.LVL191:
 527:Src/main.c    ****   MX_TIM4_Init();
 2147              		.loc 1 527 0
 2148 001e FFF7FEFF 		bl	MX_RTC_Init
 2149              	.LVL192:
 528:Src/main.c    ****   /* USER CODE BEGIN 2 */
 2150              		.loc 1 528 0
 2151 0022 FFF7FEFF 		bl	MX_TIM4_Init
 2152              	.LVL193:
ARM GAS  /tmp/ccDrtRJY.s 			page 58


 531:Src/main.c    ****   //servo_init(&servo_roll, &htim3, SERVO_ROLL_CHANNEL);
 2153              		.loc 1 531 0
 2154 0026 FFF7FEFF 		bl	init_system
 2155              	.LVL194:
 2156              	.L182:
 552:Src/main.c    ****     /* USER CODE END WHILE */
 2157              		.loc 1 552 0 discriminator 1
 2158 002a FFF7FEFF 		bl	mailbox_listen
 2159              	.LVL195:
 2160 002e FCE7     		b	.L182
 2161              		.cfi_endproc
 2162              	.LFE262:
 2164              		.comm	mailbox_buffer,50,4
 2165              		.comm	pitch_filter,28,4
 2166              		.comm	roll_filter,28,4
 2167              		.comm	servo_pitch,20,4
 2168              		.comm	servo_roll,20,4
 2169              		.comm	smoothing,4,4
 2170              		.comm	pitch_compensation,4,4
 2171              		.comm	roll_compensation,4,4
 2172              		.comm	sensor_factor,4,4
 2173              		.comm	sensor_pitch,4,4
 2174              		.comm	sensor_roll,4,4
 2175              		.comm	position_sensor,28,4
 2176              		.comm	huart1,64,4
 2177              		.comm	htim4,64,4
 2178              		.comm	htim3,64,4
 2179              		.comm	htim2,64,4
 2180              		.comm	hrtc,20,4
 2181              		.comm	hi2c2,84,4
 2182              		.section	.rodata.Error_Handler.str1.4,"aMS",%progbits,1
 2183              		.align	2
 2184              	.LC15:
 2185 0000 48414C20 		.ascii	"HAL Error_Handler call\000"
 2185      4572726F 
 2185      725F4861 
 2185      6E646C65 
 2185      72206361 
 2186              		.section	.rodata.error_alert.str1.4,"aMS",%progbits,1
 2187              		.align	2
 2188              	.LC0:
 2189 0000 7B227479 		.ascii	"{\"type\":\"error\",\"text\":\"%s\"}\012\015\000"
 2189      7065223A 
 2189      22657272 
 2189      6F72222C 
 2189      22746578 
 2190              		.section	.rodata.init_position_sensor.str1.4,"aMS",%progbits,1
 2191              		.align	2
 2192              	.LC4:
 2193 0000 43616E6E 		.ascii	"Cannot init MPU6050\000"
 2193      6F742069 
 2193      6E697420 
 2193      4D505536 
 2193      30353000 
 2194              		.section	.rodata.init_servomotors.str1.4,"aMS",%progbits,1
 2195              		.align	2
 2196              	.LC1:
ARM GAS  /tmp/ccDrtRJY.s 			page 59


 2197 0000 43616E6E 		.ascii	"Cannot init servo_roll\000"
 2197      6F742069 
 2197      6E697420 
 2197      73657276 
 2197      6F5F726F 
 2198 0017 00       		.space	1
 2199              	.LC2:
 2200 0018 43616E6E 		.ascii	"Cannot init servo_pitch\000"
 2200      6F742069 
 2200      6E697420 
 2200      73657276 
 2200      6F5F7069 
 2201              		.section	.rodata.init_system.str1.4,"aMS",%progbits,1
 2202              		.align	2
 2203              	.LC6:
 2204 0000 43616E6E 		.ascii	"Cannot init MAF\000"
 2204      6F742069 
 2204      6E697420 
 2204      4D414600 
 2205              		.section	.rodata.mailbox_message_received.str1.4,"aMS",%progbits,1
 2206              		.align	2
 2207              	.LC13:
 2208 0000 70617573 		.ascii	"pause\000"
 2208      6500
 2209 0006 0000     		.space	2
 2210              	.LC14:
 2211 0008 72657375 		.ascii	"resume\000"
 2211      6D6500
 2212              		.section	.rodata.send_angle_pack.str1.4,"aMS",%progbits,1
 2213              		.align	2
 2214              	.LC9:
 2215 0000 7B227479 		.ascii	"{\"type\":\"angle\",\"pitch\":%d,\"roll\":%d, \"tar"
 2215      7065223A 
 2215      22616E67 
 2215      6C65222C 
 2215      22706974 
 2216 002a 67657422 		.ascii	"get\":\"sensor\"}\012\000"
 2216      3A227365 
 2216      6E736F72 
 2216      227D0A00 
 2217 003a 0000     		.space	2
 2218              	.LC10:
 2219 003c 7B227479 		.ascii	"{\"type\":\"angle\",\"pitch\":%d,\"roll\":%d, \"tar"
 2219      7065223A 
 2219      22616E67 
 2219      6C65222C 
 2219      22706974 
 2220 0066 67657422 		.ascii	"get\":\"servo\"}\012\000"
 2220      3A227365 
 2220      72766F22 
 2220      7D0A00
 2221              		.section	.rodata.send_echo_pack.str1.4,"aMS",%progbits,1
 2222              		.align	2
 2223              	.LC11:
 2224 0000 7B227479 		.ascii	"{\"type\":\"echo\",\"text\":\"%s\"}\012\000"
 2224      7065223A 
 2224      22656368 
ARM GAS  /tmp/ccDrtRJY.s 			page 60


 2224      6F222C22 
 2224      74657874 
 2225              		.section	.rodata.send_message_pack.str1.4,"aMS",%progbits,1
 2226              		.align	2
 2227              	.LC12:
 2228 0000 7B227479 		.ascii	"{\"type\":\"message\",\"text\":\"%s\"}\012\000"
 2228      7065223A 
 2228      226D6573 
 2228      73616765 
 2228      222C2274 
 2229              		.section	.rodata.send_value_pack.str1.4,"aMS",%progbits,1
 2230              		.align	2
 2231              	.LC7:
 2232 0000 7B227479 		.ascii	"{\"type\":\"value\", \"target\",\"smoothing\", \"va"
 2232      7065223A 
 2232      2276616C 
 2232      7565222C 
 2232      20227461 
 2233 002a 6C756522 		.ascii	"lue\":%s}\012\000"
 2233      3A25737D 
 2233      0A00
 2234              	.LC8:
 2235 0034 7B227479 		.ascii	"{\"type\":\"value\", \"target\",\"factor\", \"value"
 2235      7065223A 
 2235      2276616C 
 2235      7565222C 
 2235      20227461 
 2236 005e 223A2573 		.ascii	"\":%s}\012\000"
 2236      7D0A00
 2237              		.section	.rodata.test_sensor.str1.4,"aMS",%progbits,1
 2238              		.align	2
 2239              	.LC3:
 2240 0000 4D505536 		.ascii	"MPU6050 connection fail\000"
 2240      30353020 
 2240      636F6E6E 
 2240      65637469 
 2240      6F6E2066 
 2241              		.section	.rodata.update_position_sensor.str1.4,"aMS",%progbits,1
 2242              		.align	2
 2243              	.LC5:
 2244 0000 43616E6E 		.ascii	"Cannot read MPU6050 Read Acce\000"
 2244      6F742072 
 2244      65616420 
 2244      4D505536 
 2244      30353020 
 2245              		.text
 2246              	.Letext0:
 2247              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 2248              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 2249              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 2250              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 2251              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 2252              		.file 7 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 2253              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 2254              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rcc.h"
 2255              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rcc_ex.h"
 2256              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
ARM GAS  /tmp/ccDrtRJY.s 			page 61


 2257              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 2258              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_i2c.h"
 2259              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rtc.h"
 2260              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_tim.h"
 2261              		.file 16 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 2262              		.file 17 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 2263              		.file 18 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_ll_tim.h"
 2264              		.file 19 "Inc/main.h"
 2265              		.file 20 "/usr/include/newlib/sys/lock.h"
 2266              		.file 21 "/usr/include/newlib/sys/_types.h"
 2267              		.file 22 "/usr/include/newlib/sys/reent.h"
 2268              		.file 23 "/usr/include/newlib/math.h"
 2269              		.file 24 "stm32-servomotor/servomotor.h"
 2270              		.file 25 "stm32-mpu6050/mpu6050.h"
 2271              		.file 26 "/usr/include/newlib/stdlib.h"
 2272              		.file 27 "signals/c/moving-average/moving_average.h"
 2273              		.file 28 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_tim_ex.h"
 2274              		.file 29 "/usr/include/newlib/string.h"
 2275              		.file 30 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_cortex.h"
 2276              		.file 31 "/usr/include/newlib/stdio.h"
 2277              		.file 32 "Inc/float_to_string.h"
ARM GAS  /tmp/ccDrtRJY.s 			page 62


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccDrtRJY.s:16     .text.MX_GPIO_Init:0000000000000000 $t
     /tmp/ccDrtRJY.s:22     .text.MX_GPIO_Init:0000000000000000 MX_GPIO_Init
     /tmp/ccDrtRJY.s:97     .text.MX_GPIO_Init:000000000000005c $d
     /tmp/ccDrtRJY.s:103    .text.error_alert:0000000000000000 $t
     /tmp/ccDrtRJY.s:110    .text.error_alert:0000000000000000 error_alert
     /tmp/ccDrtRJY.s:182    .text.error_alert:0000000000000054 $d
                            *COM*:0000000000000040 huart1
     /tmp/ccDrtRJY.s:189    .text.init_servomotors:0000000000000000 $t
     /tmp/ccDrtRJY.s:196    .text.init_servomotors:0000000000000000 init_servomotors
     /tmp/ccDrtRJY.s:257    .text.init_servomotors:000000000000003c $d
                            *COM*:0000000000000040 htim3
                            *COM*:0000000000000014 servo_roll
                            *COM*:0000000000000014 servo_pitch
     /tmp/ccDrtRJY.s:268    .text.init_servomotors_motion:0000000000000000 $t
     /tmp/ccDrtRJY.s:275    .text.init_servomotors_motion:0000000000000000 init_servomotors_motion
     /tmp/ccDrtRJY.s:294    .text.init_servomotors_motion:000000000000000c $d
     /tmp/ccDrtRJY.s:299    .text.servo_update:0000000000000000 $t
     /tmp/ccDrtRJY.s:306    .text.servo_update:0000000000000000 servo_update
     /tmp/ccDrtRJY.s:333    .text.servo_update:0000000000000018 $d
                            *COM*:0000000000000004 roll_compensation
                            *COM*:0000000000000004 pitch_compensation
     /tmp/ccDrtRJY.s:341    .text.test_sensor:0000000000000000 $t
     /tmp/ccDrtRJY.s:348    .text.test_sensor:0000000000000000 test_sensor
     /tmp/ccDrtRJY.s:419    .text.test_sensor:0000000000000058 $d
                            *COM*:0000000000000054 hi2c2
     /tmp/ccDrtRJY.s:430    .text.sensor_calc_position:0000000000000000 $t
     /tmp/ccDrtRJY.s:437    .text.sensor_calc_position:0000000000000000 sensor_calc_position
     /tmp/ccDrtRJY.s:541    .text.sensor_calc_position:00000000000000b8 $d
                            *COM*:000000000000001c position_sensor
                            *COM*:0000000000000004 sensor_factor
     /tmp/ccDrtRJY.s:550    .text.init_position_sensor:0000000000000000 $t
     /tmp/ccDrtRJY.s:557    .text.init_position_sensor:0000000000000000 init_position_sensor
     /tmp/ccDrtRJY.s:626    .text.init_position_sensor:0000000000000048 $d
                            *COM*:0000000000000004 sensor_roll
                            *COM*:0000000000000004 sensor_pitch
                            *COM*:0000000000000040 htim4
     /tmp/ccDrtRJY.s:638    .text.update_position_sensor:0000000000000000 $t
     /tmp/ccDrtRJY.s:645    .text.update_position_sensor:0000000000000000 update_position_sensor
     /tmp/ccDrtRJY.s:716    .text.update_position_sensor:0000000000000058 $d
                            *COM*:000000000000001c roll_filter
                            *COM*:000000000000001c pitch_filter
     /tmp/ccDrtRJY.s:730    .text.change_smoothing:0000000000000000 $t
     /tmp/ccDrtRJY.s:737    .text.change_smoothing:0000000000000000 change_smoothing
     /tmp/ccDrtRJY.s:808    .text.change_smoothing:0000000000000054 $d
                            *COM*:0000000000000004 smoothing
     /tmp/ccDrtRJY.s:817    .text.init_uart_messaging:0000000000000000 $t
     /tmp/ccDrtRJY.s:824    .text.init_uart_messaging:0000000000000000 init_uart_messaging
     /tmp/ccDrtRJY.s:843    .text.init_uart_messaging:000000000000000c $d
                            *COM*:0000000000000040 htim2
     /tmp/ccDrtRJY.s:848    .text.init_system:0000000000000000 $t
     /tmp/ccDrtRJY.s:855    .text.init_system:0000000000000000 init_system
     /tmp/ccDrtRJY.s:912    .text.init_system:0000000000000040 $d
     /tmp/ccDrtRJY.s:920    .text.send_value_pack:0000000000000000 $t
     /tmp/ccDrtRJY.s:927    .text.send_value_pack:0000000000000000 send_value_pack
     /tmp/ccDrtRJY.s:980    .text.send_value_pack:000000000000002c $d
ARM GAS  /tmp/ccDrtRJY.s 			page 63


     /tmp/ccDrtRJY.s:987    .text.send_angle_pack:0000000000000000 $t
     /tmp/ccDrtRJY.s:994    .text.send_angle_pack:0000000000000000 send_angle_pack
     /tmp/ccDrtRJY.s:1070   .text.send_angle_pack:0000000000000058 $d
     /tmp/ccDrtRJY.s:1077   .text.uart_message_update:0000000000000000 $t
     /tmp/ccDrtRJY.s:1084   .text.uart_message_update:0000000000000000 uart_message_update
     /tmp/ccDrtRJY.s:1115   .text.uart_message_update:0000000000000020 $d
     /tmp/ccDrtRJY.s:1123   .text.send_echo_pack:0000000000000000 $t
     /tmp/ccDrtRJY.s:1130   .text.send_echo_pack:0000000000000000 send_echo_pack
     /tmp/ccDrtRJY.s:1170   .text.send_echo_pack:0000000000000028 $d
     /tmp/ccDrtRJY.s:1176   .text.send_message_pack:0000000000000000 $t
     /tmp/ccDrtRJY.s:1183   .text.send_message_pack:0000000000000000 send_message_pack
     /tmp/ccDrtRJY.s:1223   .text.send_message_pack:0000000000000028 $d
     /tmp/ccDrtRJY.s:1229   .text.init_mailbox:0000000000000000 $t
     /tmp/ccDrtRJY.s:1236   .text.init_mailbox:0000000000000000 init_mailbox
     /tmp/ccDrtRJY.s:1248   .text.mailbox_listen:0000000000000000 $t
     /tmp/ccDrtRJY.s:1255   .text.mailbox_listen:0000000000000000 mailbox_listen
     /tmp/ccDrtRJY.s:1277   .text.mailbox_listen:0000000000000010 $d
                            *COM*:0000000000000032 mailbox_buffer
     /tmp/ccDrtRJY.s:1283   .text.mailbox_message_received:0000000000000000 $t
     /tmp/ccDrtRJY.s:1290   .text.mailbox_message_received:0000000000000000 mailbox_message_received
     /tmp/ccDrtRJY.s:1342   .text.mailbox_message_received:0000000000000034 $d
     /tmp/ccDrtRJY.s:1348   .text.HAL_UART_RxCpltCallback:0000000000000000 $t
     /tmp/ccDrtRJY.s:1355   .text.HAL_UART_RxCpltCallback:0000000000000000 HAL_UART_RxCpltCallback
     /tmp/ccDrtRJY.s:1412   .text.HAL_UART_RxCpltCallback:0000000000000030 $d
     /tmp/ccDrtRJY.s:1417   .text.Error_Handler:0000000000000000 $t
     /tmp/ccDrtRJY.s:1424   .text.Error_Handler:0000000000000000 Error_Handler
     /tmp/ccDrtRJY.s:1443   .text.Error_Handler:000000000000000c $d
     /tmp/ccDrtRJY.s:1448   .text.MX_I2C2_Init:0000000000000000 $t
     /tmp/ccDrtRJY.s:1454   .text.MX_I2C2_Init:0000000000000000 MX_I2C2_Init
     /tmp/ccDrtRJY.s:1503   .text.MX_I2C2_Init:0000000000000030 $d
     /tmp/ccDrtRJY.s:1510   .text.MX_TIM2_Init:0000000000000000 $t
     /tmp/ccDrtRJY.s:1516   .text.MX_TIM2_Init:0000000000000000 MX_TIM2_Init
     /tmp/ccDrtRJY.s:1609   .text.MX_TIM2_Init:000000000000006c $d
     /tmp/ccDrtRJY.s:1614   .text.MX_TIM3_Init:0000000000000000 $t
     /tmp/ccDrtRJY.s:1620   .text.MX_TIM3_Init:0000000000000000 MX_TIM3_Init
     /tmp/ccDrtRJY.s:1770   .text.MX_TIM3_Init:00000000000000bc $d
     /tmp/ccDrtRJY.s:1776   .text.MX_USART1_UART_Init:0000000000000000 $t
     /tmp/ccDrtRJY.s:1782   .text.MX_USART1_UART_Init:0000000000000000 MX_USART1_UART_Init
     /tmp/ccDrtRJY.s:1830   .text.MX_USART1_UART_Init:0000000000000030 $d
     /tmp/ccDrtRJY.s:1836   .text.MX_RTC_Init:0000000000000000 $t
     /tmp/ccDrtRJY.s:1842   .text.MX_RTC_Init:0000000000000000 MX_RTC_Init
     /tmp/ccDrtRJY.s:1878   .text.MX_RTC_Init:0000000000000024 $d
                            *COM*:0000000000000014 hrtc
     /tmp/ccDrtRJY.s:1884   .text.MX_TIM4_Init:0000000000000000 $t
     /tmp/ccDrtRJY.s:1890   .text.MX_TIM4_Init:0000000000000000 MX_TIM4_Init
     /tmp/ccDrtRJY.s:1983   .text.MX_TIM4_Init:0000000000000068 $d
     /tmp/ccDrtRJY.s:1989   .text.SystemClock_Config:0000000000000000 $t
     /tmp/ccDrtRJY.s:1996   .text.SystemClock_Config:0000000000000000 SystemClock_Config
     /tmp/ccDrtRJY.s:2107   .text.main:0000000000000000 $t
     /tmp/ccDrtRJY.s:2114   .text.main:0000000000000000 main
     /tmp/ccDrtRJY.s:2183   .rodata.Error_Handler.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2187   .rodata.error_alert.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2191   .rodata.init_position_sensor.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2195   .rodata.init_servomotors.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2202   .rodata.init_system.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2206   .rodata.mailbox_message_received.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2213   .rodata.send_angle_pack.str1.4:0000000000000000 $d
ARM GAS  /tmp/ccDrtRJY.s 			page 64


     /tmp/ccDrtRJY.s:2222   .rodata.send_echo_pack.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2226   .rodata.send_message_pack.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2230   .rodata.send_value_pack.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2238   .rodata.test_sensor.str1.4:0000000000000000 $d
     /tmp/ccDrtRJY.s:2242   .rodata.update_position_sensor.str1.4:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_GPIO_Init
HAL_NVIC_DisableIRQ
sprintf
strlen
HAL_UART_Transmit
HAL_Delay
HAL_NVIC_SystemReset
servo_init
servo_set_offset
HAL_TIM_Base_Start_IT
servo_set_position
HAL_I2C_Master_Transmit
HAL_I2C_Master_Receive
__aeabi_i2d
__aeabi_ddiv
__aeabi_dmul
__aeabi_d2f
__aeabi_fmul
sqrt
atan
SD_MPU6050_Init
SD_MPU6050_ReadAccelerometer
maf_filter
delete_maf
init_maf
HAL_NVIC_EnableIRQ
float_to_string
__aeabi_f2iz
HAL_UART_Receive_IT
strcmp
HAL_I2C_Init
HAL_TIM_Base_Init
HAL_TIM_ConfigClockSource
HAL_TIMEx_MasterConfigSynchronization
HAL_TIM_PWM_Init
HAL_TIM_PWM_ConfigChannel
HAL_TIM_MspPostInit
HAL_MultiProcessor_Init
HAL_RTC_Init
memset
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCCEx_PeriphCLKConfig
HAL_Init
